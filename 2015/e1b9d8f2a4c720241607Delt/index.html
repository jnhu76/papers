<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Delta State Replicated Data Types - 可视化教学工具</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    body { 
      font-family: 'Inter', sans-serif; 
      scroll-behavior: smooth;
    }
    .mobile-optimized { 
      margin-bottom: 2rem !important; 
    }
    @media (max-width: 768px) {
      .content-section { 
        padding: 1rem; 
        margin-bottom: 1.5rem;
      }
      .technical-details {
        margin: 1rem 0;
      }
      .nav-scroll {
        overflow-x: auto;
        white-space: nowrap;
        -webkit-overflow-scrolling: touch;
      }
      .nav-scroll::-webkit-scrollbar {
        display: none;
      }
    }
    .hide-scrollbar {
      -ms-overflow-style: none;
      scrollbar-width: none;
    }
    .hide-scrollbar::-webkit-scrollbar {
      display: none;
    }
    .nav-item {
      @apply px-4 py-2 rounded-lg transition-colors duration-200 text-gray-600 hover:text-blue-600 hover:bg-blue-50 whitespace-nowrap;
    }
    .nav-item.active {
      @apply text-blue-600 bg-blue-100;
    }
    .code-block {
      @apply bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto font-mono text-sm;
    }
    .tech-card {
      @apply transition-all duration-300 hover:shadow-md hover:scale-[1.02];
    }
    .algorithm-container {
      @apply bg-gray-800 text-gray-100 p-6 rounded-lg overflow-x-auto font-mono text-sm;
    }
    .algorithm-line {
      @apply py-1 border-l-4 border-transparent hover:border-blue-500 hover:bg-gray-700/50 px-2;
    }
    .algorithm-line-number {
      @apply inline-block w-8 text-right text-gray-500 mr-4 select-none;
    }
    .comparison-table {
      @apply w-full border-collapse;
    }
    .comparison-table th {
      @apply bg-blue-50 text-blue-700 font-semibold p-3 border border-blue-200;
    }
    .comparison-table td {
      @apply p-3 border border-gray-200;
    }
    .comparison-table tr:nth-child(even) {
      @apply bg-gray-50;
    }
    .lattice-visualization {
      @apply relative p-8 bg-gradient-to-br from-gray-50 to-gray-100 rounded-lg border border-gray-300;
    }
    .lattice-node {
      @apply absolute bg-white border-2 border-blue-500 rounded-full w-16 h-16 flex items-center justify-center font-bold shadow-lg transition-all duration-300;
    }
    .lattice-edge {
      @apply absolute bg-gray-400;
    }
  </style>
</head>
<body class="bg-gradient-to-br from-blue-400 via-purple-500 to-pink-400 min-h-screen">
  <!-- 导航系统 -->
  <nav class="nav-scroll bg-white/90 backdrop-blur-sm sticky top-0 z-50 border-b border-gray-200">
    <div class="container mx-auto px-4 py-3">
      <div class="flex space-x-6 hide-scrollbar">
        <a href="#abstract" class="nav-item whitespace-nowrap">
          <i class="fas fa-file-alt mr-2"></i>摘要
        </a>
        <a href="#background-motivation" class="nav-item whitespace-nowrap">
          <i class="fas fa-layer-group mr-2"></i>背景与动机
        </a>
        <a href="#challenges" class="nav-item whitespace-nowrap">
          <i class="fas fa-exclamation-triangle mr-2"></i>问题与挑战
        </a>
        <a href="#design-implementation" class="nav-item whitespace-nowrap">
          <i class="fas fa-cogs mr-2"></i>设计与实现
        </a>
        <a href="#applications" class="nav-item whitespace-nowrap">
          <i class="fas fa-boxes mr-2"></i>应用实例
        </a>
        <a href="#conclusion" class="nav-item whitespace-nowrap">
          <i class="fas fa-flag-checkered mr-2"></i>结论与不足
        </a>
      </div>
    </div>
  </nav>

  <div class="container mx-auto px-4 py-8">
    <div class="bg-white/95 backdrop-blur-sm rounded-xl shadow-lg p-6 md:p-8">
      <!-- 论文标题和元数据 -->
      <div class="mb-12 md:mb-16 mobile-optimized">
        <h1 class="text-3xl md:text-4xl font-bold text-gray-800 mb-6 text-center md:text-left">
          Delta State Replicated Data Types (δ-CRDTs)
        </h1>
        
        <div class="bg-gradient-to-r from-blue-50 to-purple-50 border-l-4 border-blue-500 p-6 rounded-r-lg">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6 text-gray-700">
            <div class="space-y-4">
              <div>
                <strong class="text-blue-700 block mb-2 text-lg">作者信息</strong>
                <div class="text-lg font-medium">Paulo Sérgio Almeida</div>
                <div class="text-lg font-medium">Ali Shoker</div>
                <div class="text-lg font-medium">Carlos Baquero</div>
                <div class="text-sm text-gray-600 mt-2">HASLab/INESC TEC and Universidade do Minho, Portugal</div>
              </div>
              <div>
                <strong class="text-blue-700 block mb-2">arXiv标识</strong>
                <div class="font-mono text-sm bg-white px-3 py-2 rounded border inline-block">1603.01529v1</div>
              </div>
            </div>
            <div class="space-y-4">
              <div>
                <strong class="text-blue-700 block mb-2">关键词</strong>
                <div class="flex flex-wrap gap-2 mt-1">
                  <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm">CRDTs</span>
                  <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm">最终一致性</span>
                  <span class="bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm">分布式系统</span>
                  <span class="bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-sm">增量状态</span>
                  <span class="bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm">因果一致性</span>
                </div>
              </div>
              <div>
                <strong class="text-blue-700 block mb-2">核心创新点</strong>
                <ul class="list-disc list-inside text-sm space-y-1">
                  <li>δ-CRDTs：增量状态传播</li>
                  <li>Delta-mutators：解耦变更与状态</li>
                  <li>因果一致性算法</li>
                  <li>Causal CRDTs通用框架</li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- 核心贡献突出显示 -->
      <div class="bg-gradient-to-r from-green-50 to-blue-50 border-l-4 border-green-500 p-6 rounded-r-lg mb-12 md:mb-16">
        <h4 class="font-bold text-green-700 mb-3 flex items-center text-xl">
          <i class="fas fa-trophy mr-2"></i>论文核心贡献
        </h4>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <ul class="list-disc list-inside space-y-2 text-gray-700">
            <li><strong>δ-CRDTs新范式</strong>：结合状态型和操作型CRDTs的优势</li>
            <li><strong>增量状态传播</strong>：只发送变更部分而非完整状态</li>
            <li><strong>Delta-mutators</strong>：返回增量状态的变异操作</li>
            <li><strong>因果一致性保障</strong>：通过delta-interval算法实现</li>
          </ul>
          <ul class="list-disc list-inside space-y-2 text-gray-700">
            <li><strong>Causal CRDTs框架</strong>：基于点存储的通用设计模式</li>
            <li><strong>多种δ-CRDT实例</strong>：计数器、集合、映射等</li>
            <li><strong>形式化验证</strong>：收敛性和因果一致性证明</li>
            <li><strong>实用算法</strong>：反熵算法和因果合并条件</li>
          </ul>
        </div>
      </div>
      
      <!-- 摘要 -->
      <section id="abstract" class="content-section mobile-optimized mb-12 md:mb-16">
        <h2 class="text-2xl md:text-3xl font-bold text-gray-800 mb-6 md:mb-8 flex items-center">
          <i class="fas fa-file-alt mr-3 text-blue-500"></i>
          摘要
        </h2>
        
        <div class="space-y-6 text-gray-700">
          <div class="bg-white p-6 rounded-lg border border-gray-200 shadow-sm">
            <h3 class="font-bold text-gray-800 mb-4 text-lg">论文核心思想</h3>
            <p class="mb-4">CRDTs是支持最终一致性的分布式数据类型。传统上分为两种设计：</p>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
              <div class="bg-blue-50 p-4 rounded-lg border border-blue-200">
                <h4 class="font-bold text-blue-700 mb-2 flex items-center">
                  <i class="fas fa-server mr-2"></i>状态型CRDTs
                </h4>
                <ul class="list-disc list-inside text-sm space-y-1">
                  <li>传播完整状态</li>
                  <li>通信开销大</li>
                  <li>可靠网络需求低</li>
                  <li>幂等合并操作</li>
                </ul>
              </div>
              <div class="bg-green-50 p-4 rounded-lg border border-green-200">
                <h4 class="font-bold text-green-700 mb-2 flex items-center">
                  <i class="fas fa-exchange-alt mr-2"></i>操作型CRDTs
                </h4>
                <ul class="list-disc list-inside text-sm space-y-1">
                  <li>传播操作本身</li>
                  <li>通信开销小</li>
                  <li>需要可靠传输</li>
                  <li>非幂等操作</li>
                </ul>
              </div>
            </div>
            
            <div class="bg-gradient-to-r from-purple-50 to-pink-50 p-6 rounded-lg border-l-4 border-purple-500">
              <h4 class="font-bold text-purple-700 mb-3 flex items-center">
                <i class="fas fa-lightbulb mr-2"></i>δ-CRDTs的创新点
              </h4>
              <p class="mb-3">δ-CRDTs结合了两者的优势：</p>
              <ul class="list-disc list-inside space-y-2">
                <li><strong>小消息</strong>：像操作型CRDTs一样传播增量</li>
                <li><strong>不可靠通道</strong>：像状态型CRDTs一样容忍丢失和重复</li>
                <li><strong>幂等性</strong>：保持join操作的幂等、交换、结合性质</li>
                <li><strong>增量状态</strong>：通过delta-mutators返回变更部分</li>
              </ul>
            </div>
          </div>
        </div>
      </section>
      
      <!-- 背景与动机 -->
      <section id="background-motivation" class="content-section mobile-optimized mb-12 md:mb-16">
        <h2 class="text-2xl md:text-3xl font-bold text-gray-800 mb-6 md:mb-8 flex items-center">
          <i class="fas fa-layer-group mr-3 text-blue-500"></i>
          背景与动机
        </h2>
        
        <div class="space-y-8">
          <!-- CRDTs背景介绍 -->
          <div class="bg-white p-6 rounded-lg border border-gray-200 shadow-sm">
            <h3 class="font-bold text-gray-800 mb-4 text-lg">最终一致性与CRDTs</h3>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
              <div>
                <h4 class="font-bold text-blue-700 mb-3 flex items-center">
                  <i class="fas fa-sync-alt mr-2"></i>最终一致性需求
                </h4>
                <ul class="list-disc list-inside space-y-2 text-gray-700">
                  <li>大规模分布式系统需要高可用性</li>
                  <li>网络分区和故障不可避免</li>
                  <li>一致性延迟可以接受</li>
                  <li>避免应用特定的冲突解决逻辑</li>
                </ul>
              </div>
              <div>
                <h4 class="font-bold text-green-700 mb-3 flex items-center">
                  <i class="fas fa-database mr-2"></i>CRDTs的作用
                </h4>
                <ul class="list-disc list-inside space-y-2 text-gray-700">
                  <li>设计自包含的分布式数据类型</li>
                  <li>保证始终可用和最终收敛</li>
                  <li>已在生产中广泛部署（如Riak、SoundCloud）</li>
                  <li>支持数百万用户</li>
                </ul>
              </div>
            </div>
          </div>
          
          <!-- 现有方案对比 -->
          <div class="bg-white p-6 rounded-lg border border-gray-200 shadow-sm">
            <h3 class="font-bold text-gray-800 mb-4 text-lg">现有CRDT方案的局限性</h3>
            
            <table class="comparison-table mb-6">
              <thead>
                <tr>
                  <th>特性</th>
                  <th>状态型CRDTs</th>
                  <th>操作型CRDTs</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td class="font-medium">通信开销</td>
                  <td class="text-red-600">高（发送完整状态）</td>
                  <td class="text-green-600">低（发送操作）</td>
                </tr>
                <tr>
                  <td class="font-medium">网络要求</td>
                  <td class="text-green-600">不可靠网络即可</td>
                  <td class="text-red-600">需要可靠传输</td>
                </tr>
                <tr>
                  <td class="font-medium">幂等性</td>
                  <td class="text-green-600">有（join操作）</td>
                  <td class="text-red-600">无（操作非幂等）</td>
                </tr>
                <tr>
                  <td class="font-medium">状态大小</td>
                  <td class="text-red-600">随操作增长</td>
                  <td class="text-green-600">紧凑</td>
                </tr>
                <tr>
                  <td class="font-medium">成员管理</td>
                  <td class="text-green-600">简单</td>
                  <td class="text-red-600">复杂</td>
                </tr>
              </tbody>
            </table>
            
            <!-- 原图1：状态型计数器CRDT -->
            <details class="technical-details bg-gray-50 rounded-lg p-4 md:p-6 mb-6">
              <summary class="cursor-pointer font-semibold text-lg md:text-xl text-gray-800 hover:text-blue-600 transition-colors py-2">
                <i class="fas fa-microscope mr-2"></i>技术细节：图1 - 状态型计数器CRDT
              </summary>
              
              <div class="mt-6 space-y-6">
                <!-- 原图展示部分 -->
                <div class="original-figure-container">
                  <div class="flex flex-col sm:flex-row sm:items-center justify-between mb-4 gap-2">
                    <h5 class="font-semibold text-gray-700 text-base md:text-lg">
                      <i class="fas fa-image mr-2 text-blue-500"></i>
                      原图 1: 状态型计数器CRDT
                    </h5>
                    <span class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded self-start sm:self-auto">论文原图</span>
                  </div>
                  
                  <!-- 原图占位符 -->
                  <div class="image-placeholder bg-gradient-to-br from-gray-100 to-gray-200 p-6 md:p-8 rounded-lg text-center border-2 border-dashed border-gray-300">
                    <img src="./images/fig1.png" alt="状态型计数器CRDT: GCounter状态是副本标识符到正整数的映射" class="max-w-full h-auto rounded-lg">
                  </div>
                  
                  <!-- 原图图注 -->
                  <div class="mt-4 text-sm text-gray-600 bg-gray-50 p-3 rounded border">
                    <strong>原图图注:</strong> GCounter CRDT状态是从副本标识符到正整数的映射。底部状态⊥是空映射（未映射的键隐式映射为零）。inc_i递增本地副本i对应的值。join操作是映射的点对点最大值。
                  </div>
                </div>
                
                <!-- 技术解释部分 -->
                <div class="bg-blue-50 p-4 rounded-lg border border-blue-200">
                  <h5 class="font-semibold text-blue-700 mb-3 flex items-center text-base md:text-lg">
                    <i class="fas fa-info-circle mr-2"></i>技术解释：
                  </h5>
                  <ul class="list-disc list-inside space-y-2 text-sm md:text-base text-gray-700">
                    <li><strong>GCounter设计:</strong> 每个副本维护自己的计数值，通过映射存储所有副本的计数</li>
                    <li><strong>增量操作:</strong> inc_i只更新本地副本的计数值</li>
                    <li><strong>join操作:</strong> 取两个映射的逐点最大值，保证单调递增</li>
                    <li><strong>通信问题:</strong> 即使只有一个副本有更新，也需要发送整个映射</li>
                  </ul>
                </div>
                
                <!-- 设计实现部分 -->
                <div class="bg-green-50 p-4 rounded-lg border border-green-200">
                  <h5 class="font-semibold text-green-700 mb-3 flex items-center text-base md:text-lg">
                    <i class="fas fa-cogs mr-2"></i>设计实现：
                  </h5>
                  <div class="text-sm md:text-base text-gray-700 space-y-3">
                    <div>
                      <strong class="text-green-700">数据结构:</strong>
                      <div class="code-block mt-2">
                        // GCounter状态定义<br>
                        State = Map<ReplicaID, Integer><br>
                        // 初始状态<br>
                        ⊥ = {} // 空映射<br>
                        // 查询操作<br>
                        value(state) = Σ state.values()
                      </div>
                    </div>
                    <div>
                      <strong class="text-green-700">变异操作:</strong>
                      <div class="code-block mt-2">
                        // 递增操作<br>
                        inc_i(state) = state{i ↦ state(i) + 1}<br>
                        // join操作<br>
                        join(s1, s2) = {k ↦ max(s1(k), s2(k)) | k ∈ dom(s1) ∪ dom(s2)}
                      </div>
                    </div>
                  </div>
                </div>
                
                <!-- 性能分析部分 -->
                <div class="bg-purple-50 p-4 rounded-lg border border-purple-200">
                  <h5 class="font-semibold text-purple-700 mb-3 flex items-center text-base md:text-lg">
                    <i class="fas fa-chart-line mr-2"></i>性能分析：
                  </h5>
                  <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm md:text-base">
                    <div>
                      <strong class="text-purple-700">通信开销:</strong>
                      <ul class="list-disc list-inside mt-1 text-gray-700">
                        <li>状态大小: O(n)，n为副本数</li>
                        <li>每次更新传播整个映射</li>
                        <li>未更改的条目也被传输</li>
                      </ul>
                    </div>
                    <div>
                      <strong class="text-purple-700">优化需求:</strong>
                      <ul class="list-disc list-inside mt-1 text-gray-700">
                        <li>只传输变更部分</li>
                        <li>保持幂等性</li>
                        <li>容忍网络不可靠性</li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </details>
          </div>
        </div>
      </section>
      
      <!-- 问题与挑战 -->
      <section id="challenges" class="content-section mobile-optimized mb-12 md:mb-16">
        <h2 class="text-2xl md:text-3xl font-bold text-gray-800 mb-6 md:mb-8 flex items-center">
          <i class="fas fa-exclamation-triangle mr-3 text-blue-500"></i>
          问题与挑战
        </h2>
        
        <div class="space-y-6">
          <div class="bg-gradient-to-r from-red-50 to-orange-50 border-l-4 border-red-500 p-6 rounded-r-lg">
            <h3 class="font-bold text-red-700 mb-4 text-lg flex items-center">
              <i class="fas fa-bug mr-2"></i>核心问题：状态传播的低效性
            </h3>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div class="space-y-4">
                <div class="bg-white p-4 rounded-lg shadow-sm">
                  <h4 class="font-bold text-gray-800 mb-2">状态型CRDTs的问题</h4>
                  <ul class="list-disc list-inside text-sm space-y-1">
                    <li>每次传播发送完整状态</li>
                    <li>状态大小可能很大</li>
                    <li>计数器：状态大小随副本数增长</li>
                    <li>集合：状态大小随元素数增长</li>
                  </ul>
                </div>
                
                <div class="bg-white p-4 rounded-lg shadow-sm">
                  <h4 class="font-bold text-gray-800 mb-2">操作型CRDTs的问题</h4>
                  <ul class="list-disc list-inside text-sm space-y-1">
                    <li>需要可靠传输保证</li>
                    <li>要求一次且仅一次的因果广播</li>
                    <li>成员管理复杂</li>
                    <li>新节点加入困难</li>
                  </ul>
                </div>
              </div>
              
              <div class="space-y-4">
                <div class="bg-white p-4 rounded-lg shadow-sm">
                  <h4 class="font-bold text-gray-800 mb-2">δ-CRDTs面临的挑战</h4>
                  <ul class="list-disc list-inside text-sm space-y-1">
                    <li>如何定义增量状态（delta）</li>
                    <li>如何保证delta合并的语义等价性</li>
                    <li>如何维护因果一致性</li>
                    <li>如何设计通用的delta框架</li>
                  </ul>
                </div>
                
                <div class="bg-white p-4 rounded-lg shadow-sm">
                  <h4 class="font-bold text-gray-800 mb-2">技术难题</h4>
                  <ul class="list-disc list-inside text-sm space-y-1">
                    <li>Delta是"状态片段"而非完整状态</li>
                    <li>需要因果合并而非简单合并</li>
                    <li>必须保持join操作的数学性质</li>
                    <li>需要新的反熵算法</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
          
          <!-- 技术挑战可视化 -->
          <div class="bg-white p-6 rounded-lg border border-gray-200 shadow-sm">
            <h3 class="font-bold text-gray-800 mb-4 text-lg">技术挑战的可视化</h3>
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
              <div>
                <h4 class="font-bold text-blue-700 mb-3">状态传播的低效性</h4>
                <div class="space-y-4">
                  <div class="flex items-center justify-between p-3 bg-gray-100 rounded">
                    <span>副本A的增量</span>
                    <div class="flex items-center">
                      <span class="text-green-600 font-mono text-sm">+{i:1}</span>
                      <i class="fas fa-arrow-right mx-2 text-gray-400"></i>
                      <div class="bg-red-100 px-3 py-1 rounded">
                        <span class="text-red-700 font-mono text-sm">{i:5,j:3,k:2}</span>
                      </div>
                    </div>
                  </div>
                  <div class="text-sm text-gray-600">
                    <p>问题：即使只有小的增量，也要传输完整状态</p>
                    <p class="mt-1">浪费带宽：传输了j:3和k:2这些未改变的值</p>
                  </div>
                </div>
              </div>
              
              <div>
                <h4 class="font-bold text-green-700 mb-3">δ-CRDTs的理想方案</h4>
                <div class="space-y-4">
                  <div class="flex items-center justify-between p-3 bg-gray-100 rounded">
                    <span>副本A的增量</span>
                    <div class="flex items-center">
                      <span class="text-green-600 font-mono text-sm">+{i:1}</span>
                      <i class="fas fa-arrow-right mx-2 text-gray-400"></i>
                      <div class="bg-green-100 px-3 py-1 rounded">
                        <span class="text-green-700 font-mono text-sm">{i:1}</span>
                      </div>
                    </div>
                  </div>
                  <div class="text-sm text-gray-600">
                    <p>解决方案：只传输增量部分</p>
                    <p class="mt-1">节省带宽：只传输实际变更的部分{i:1}</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
      
      <!-- 设计与实现 -->
      <section id="design-implementation" class="content-section mobile-optimized mb-12 md:mb-16">
        <h2 class="text-2xl md:text-3xl font-bold text-gray-800 mb-6 md:mb-8 flex items-center">
          <i class="fas fa-cogs mr-3 text-blue-500"></i>
          设计与实现
        </h2>
        
        <div class="space-y-8">
          <!-- δ-CRDTs核心概念 -->
          <div class="bg-white p-6 rounded-lg border border-gray-200 shadow-sm">
            <h3 class="font-bold text-gray-800 mb-4 text-lg">δ-CRDTs的核心定义</h3>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                <h4 class="font-bold text-blue-700 mb-3 flex items-center">
                  <i class="fas fa-cube mr-2"></i>Delta-mutator定义
                </h4>
                <div class="code-block">
                  // Delta-mutator定义<br>
                  m^δ: S → S<br>
                  // 输入：当前状态X<br>
                  // 输出：增量状态δ = m^δ(X)<br><br>
                  // δ-CRDT状态转换<br>
                  X' = X ⊔ m^δ(X)  // 应用本地增量<br>
                  X' = X ⊔ D       // 合并接收的delta-group
                </div>
              </div>
              
              <div>
                <h4 class="font-bold text-green-700 mb-3 flex items-center">
                  <i class="fas fa-sitemap mr-2"></i>δ-CRDT结构
                </h4>
                <div class="code-block">
                  // δ-CRDT三元组定义<br>
                  δ-CRDT = (S, M^δ, Q)<br><br>
                  // S: 连接半格（join-semilattice）<br>
                  // M^δ: delta-mutator集合<br>
                  // Q: 查询函数集合<br><br>
                  // Delta-group定义<br>
                  D ::= δ | D ⊔ D
                </div>
              </div>
            </div>
          </div>
          
          <!-- δ-CRDT计数器示例 -->
          <div class="bg-white p-6 rounded-lg border border-gray-200 shadow-sm">
            <h3 class="font-bold text-gray-800 mb-4 text-lg">δ-CRDT计数器示例</h3>
            
            <!-- 原图2：δ-CRDT计数器 -->
            <details class="technical-details bg-gray-50 rounded-lg p-4 md:p-6 mb-6">
              <summary class="cursor-pointer font-semibold text-lg md:text-xl text-gray-800 hover:text-blue-600 transition-colors py-2">
                <i class="fas fa-microscope mr-2"></i>技术细节：图2 - δ-CRDT计数器
              </summary>
              
              <div class="mt-6 space-y-6">
                <!-- 原图展示部分 -->
                <div class="original-figure-container">
                  <div class="flex flex-col sm:flex-row sm:items-center justify-between mb-4 gap-2">
                    <h5 class="font-semibold text-gray-700 text-base md:text-lg">
                      <i class="fas fa-image mr-2 text-blue-500"></i>
                      原图 2: δ-CRDT计数器
                    </h5>
                    <span class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded self-start sm:self-auto">论文原图</span>
                  </div>
                  
                  <!-- 原图占位符 -->
                  <div class="image-placeholder bg-gradient-to-br from-gray-100 to-gray-200 p-6 md:p-8 rounded-lg text-center border-2 border-dashed border-gray-300">
                    <img src="./images/fig2.png" alt="δ-CRDT计数器: 增量变异器只返回本地副本的递增条目" class="max-w-full h-auto rounded-lg">
                  </div>
                  
                  <!-- 原图图注 -->
                  <div class="mt-4 text-sm text-gray-600 bg-gray-50 p-3 rounded border">
                    <strong>原图图注:</strong> δ-CRDT计数器。inc_i^δ递增映射条目并仅返回该条目，而不是像状态型CRDT计数器中的inc那样返回完整映射。
                  </div>
                </div>
                
                <!-- 技术解释部分 -->
                <div class="bg-blue-50 p-4 rounded-lg border border-blue-200">
                  <h5 class="font-semibold text-blue-700 mb-3 flex items-center text-base md:text-lg">
                    <i class="fas fa-info-circle mr-2"></i>技术解释：
                  </h5>
                  <ul class="list-disc list-inside space-y-2 text-sm md:text-base text-gray-700">
                    <li><strong>增量变异器:</strong> inc_i^δ只返回{i: m(i)+1}，而不是完整映射</li>
                    <li><strong>状态转换:</strong> X' = X ⊔ {i: m(i)+1}，通过join操作合并</li>
                    <li><strong>语义等价:</strong> inc_i(X) = X ⊔ inc_i^δ(X)</li>
                    <li><strong>通信优化:</strong> 只传输单个键值对而非完整映射</li>
                  </ul>
                </div>
                
                <!-- 设计实现部分 -->
                <div class="bg-green-50 p-4 rounded-lg border border-green-200">
                  <h5 class="font-semibold text-green-700 mb-3 flex items-center text-base md:text-lg">
                    <i class="fas fa-cogs mr-2"></i>设计实现：
                  </h5>
                  <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm md:text-base">
                    <div>
                      <strong class="text-green-700">标准CRDT计数器:</strong>
                      <div class="code-block mt-2">
                        inc_i(state) = <br>
                          state{i ↦ state(i) + 1}
                      </div>
                    </div>
                    <div>
                      <strong class="text-green-700">δ-CRDT计数器:</strong>
                      <div class="code-block mt-2">
                        inc_i^δ(state) = <br>
                          {i ↦ state(i) + 1}<br><br>
                        // 应用增量<br>
                        X' = X ⊔ {i ↦ X(i)+1}
                      </div>
                    </div>
                  </div>
                </div>
                
                <!-- 性能分析部分 -->
                <div class="bg-purple-50 p-4 rounded-lg border border-purple-200">
                  <h5 class="font-semibold text-purple-700 mb-3 flex items-center text-base md:text-lg">
                    <i class="fas fa-chart-line mr-2"></i>性能分析：
                  </h5>
                  <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm md:text-base">
                    <div>
                      <strong class="text-purple-700">通信优化:</strong>
                      <ul class="list-disc list-inside mt-1 text-gray-700">
                        <li>标准CRDT: 传输O(n)大小</li>
                        <li>δ-CRDT: 传输O(1)大小</li>
                        <li>减少传输数据: 从n个条目到1个条目</li>
                      </ul>
                    </div>
                    <div>
                      <strong class="text-purple-700">保持的性质:</strong>
                      <ul class="list-disc list-inside mt-1 text-gray-700">
                        <li>幂等性: 增量可重复合并</li>
                        <li>交换性: 合并顺序无关</li>
                        <li>结合性: 分组合并结果一致</li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </details>
          </div>
          
          <!-- 基本反熵算法 -->
          <div class="bg-white p-6 rounded-lg border border-gray-200 shadow-sm">
            <h3 class="font-bold text-gray-800 mb-4 text-lg">基本反熵算法（算法1）</h3>
            
            <div class="algorithm-container mb-6">
              <div class="algorithm-line">
                <span class="algorithm-line-number">1</span>
                // 算法1: 基本δ-CRDT反熵算法（确保最终收敛）
              </div>
              <div class="algorithm-line">
                <span class="algorithm-line-number">2</span>
                // 初始化：X_i = ⊥, D_i = ⊥
              </div>
              <div class="algorithm-line">
                <span class="algorithm-line-number">3</span>
              </div>
              <div class="algorithm-line">
                <span class="algorithm-line-number">4</span>
                <span class="text-green-400">// 本地操作执行</span>
              </div>
              <div class="algorithm-line">
                <span class="algorithm-line-number">5</span>
                <span class="text-yellow-300">upon</span> execute(m^δ) <span class="text-yellow-300">do</span>
              </div>
              <div class="algorithm-line">
                <span class="algorithm-line-number">6</span>&nbsp;&nbsp;d = m^δ(X_i)          <span class="text-gray-500">// 生成增量</span>
              </div>
              <div class="algorithm-line">
                <span class="algorithm-line-number">7</span>&nbsp;&nbsp;X_i = X_i ⊔ d        <span class="text-gray-500">// 更新状态</span>
              </div>
              <div class="algorithm-line">
                <span class="algorithm-line-number">8</span>&nbsp;&nbsp;D_i = D_i ⊔ d        <span class="text-gray-500">// 缓冲增量</span>
              </div>
              <div class="algorithm-line">
                <span class="algorithm-line-number">9</span>&nbsp;&nbsp;<span class="text-yellow-300">if</span> t_i <span class="text-yellow-300">then</span>        <span class="text-gray-500">// 传递模式</span>
              </div>
              <div class="algorithm-line">
                <span class="algorithm-line-number">10</span>&nbsp;&nbsp;&nbsp;&nbsp;D_i = D_i ⊔ d     <span class="text-gray-500">// 允许传递传播</span>
              </div>
              <div class="algorithm-line">
                <span class="algorithm-line-number">11</span>&nbsp;&nbsp;<span class="text-yellow-300">end if</span>
              </div>
              <div class="algorithm-line">
                <span class="algorithm-line-number">12</span><span class="text-yellow-300">end upon</span>
              </div>
              <div class="algorithm-line">
                <span class="algorithm-line-number">13</span>
              </div>
              <div class="algorithm-line">
                <span class="algorithm-line-number">14</span>
                <span class="text-green-400">// 周期性发送</span>
              </div>
              <div class="algorithm-line">
                <span class="algorithm-line-number">15</span>
                <span class="text-yellow-300">upon</span> periodic_send <span class="text-yellow-300">do</span>
              </div>
              <div class="algorithm-line">
                <span class="algorithm-line-number">16</span>&nbsp;&nbsp;payload = choose(D_i, X_i) <span class="text-gray-500">// 选择发送增量或完整状态</span>
              </div>
              <div class="algorithm-line">
                <span class="algorithm-line-number">17</span>&nbsp;&nbsp;broadcast(payload)    <span class="text-gray-500">// 广播</span>
              </div>
              <div class="algorithm-line">
                <span class="algorithm-line-number">18</span>&nbsp;&nbsp;D_i = ⊥                <span class="text-gray-500">// 重置增量缓冲</span>
              </div>
              <div class="algorithm-line">
                <span class="algorithm-line-number">19</span><span class="text-yellow-300">end upon</span>
              </div>
              <div class="algorithm-line">
                <span class="algorithm-line-number">20</span>
              </div>
              <div class="algorithm-line">
                <span class="algorithm-line-number">21</span>
                <span class="text-green-400">// 接收处理</span>
              </div>
              <div class="algorithm-line">
                <span class="algorithm-line-number">22</span>
                <span class="text-yellow-300">upon</span> receive(d) <span class="text-yellow-300">do</span>
              </div>
              <div class="algorithm-line">
                <span class="algorithm-line-number">23</span>&nbsp;&nbsp;X_i = X_i ⊔ d        <span class="text-gray-500">// 合并到状态</span>
              </div>
              <div class="algorithm-line">
                <span class="algorithm-line-number">24</span>&nbsp;&nbsp;<span class="text-yellow-300">if</span> t_i <span class="text-yellow-300">then</span>        <span class="text-gray-500">// 传递模式</span>
              </div>
              <div class="algorithm-line">
                <span class="algorithm-line-number">25</span>&nbsp;&nbsp;&nbsp;&nbsp;D_i = D_i ⊔ d     <span class="text-gray-500">// 缓冲接收的增量</span>
              </div>
              <div class="algorithm-line">
                <span class="algorithm-line-number">26</span>&nbsp;&nbsp;<span class="text-yellow-300">end if</span>
              </div>
              <div class="algorithm-line">
                <span class="algorithm-line-number">27</span><span class="text-yellow-300">end upon</span>
              </div>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-6">
              <div class="tech-card bg-blue-50 p-4 rounded-lg border border-blue-200">
                <h4 class="font-bold text-blue-700 text-base md:text-lg mb-2">
                  <i class="fas fa-broadcast-tower mr-2"></i>两种模式
                </h4>
                <ul class="list-disc list-inside text-sm text-gray-700">
                  <li><strong>直接模式</strong>：仅传播本地增量</li>
                  <li><strong>传递模式</strong>：传递本地和接收的增量</li>
                  <li>由t_i标志控制</li>
                </ul>
              </div>
              
              <div class="tech-card bg-green-50 p-4 rounded-lg border border-green-200">
                <h4 class="font-bold text-green-700 text-base md:text-lg mb-2">
                  <i class="fas fa-exchange-alt mr-2"></i>通信策略
                </h4>
                <ul class="list-disc list-inside text-sm text-gray-700">
                  <li><strong>增量优先</strong>：通常发送D_i</li>
                  <li><strong>状态回退</strong>：偶尔发送完整状态X_i</li>
                  <li>由choose函数决策</li>
                </ul>
              </div>
              
              <div class="tech-card bg-purple-50 p-4 rounded-lg border border-purple-200">
                <h4 class="font-bold text-purple-700 text-base md:text-lg mb-2">
                  <i class="fas fa-shield-alt mr-2"></i>可靠性保障
                </h4>
                <ul class="list-disc list-inside text-sm text-gray-700">
                  <li><strong>容忍丢失</strong>：增量可重传</li>
                  <li><strong>容忍重复</strong>：join操作幂等</li>
                  <li><strong>无序传输</strong>：join操作交换</li>
                </ul>
              </div>
            </div>
          </div>
          
          <!-- 因果一致性算法 -->
          <div class="bg-white p-6 rounded-lg border border-gray-200 shadow-sm">
            <h3 class="font-bold text-gray-800 mb-4 text-lg">因果一致性算法（算法2）</h3>
            
            <div class="mb-6">
              <h4 class="font-bold text-blue-700 mb-3">核心概念定义</h4>
              
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="bg-gray-50 p-4 rounded-lg">
                  <h5 class="font-bold text-gray-700 mb-2">Delta-interval定义</h5>
                  <div class="code-block">
                    Δ_i^{a,b} = ⊔ {d_i^k | a ≤ k < b}
                  </div>
                  <p class="text-sm text-gray-600 mt-2">副本i从状态a到状态b之间的增量集合</p>
                </div>
                
                <div class="bg-gray-50 p-4 rounded-lg">
                  <h5 class="font-bold text-gray-700 mb-2">因果合并条件</h5>
                  <div class="code-block">
                    X_i ⊇ X_j^a ⇒ 可合并Δ_j^{a,b}
                  </div>
                  <p class="text-sm text-gray-600 mt-2">仅当接收方状态包含发送方初始状态时才合并</p>
                </div>
              </div>
            </div>
            
            <div class="algorithm-container mb-6">
              <div class="algorithm-line">
                <span class="algorithm-line-number">1</span>
                // 算法2: δ-CRDT因果一致性反熵算法
              </div>
              <div class="algorithm-line">
                <span class="algorithm-line-number">2</span>
                // 状态：X_i（持久化），c_i（计数器），D_i[k]（增量映射），A_i[j]（确认映射）
              </div>
              <div class="algorithm-line">
                <span class="algorithm-line-number">3</span>
              </div>
              <div class="algorithm-line">
                <span class="algorithm-line-number">4</span>
                <span class="text-green-400">// 本地操作执行</span>
              </div>
              <div class="algorithm-line">
                <span class="algorithm-line-number">5</span>
                <span class="text-yellow-300">upon</span> execute(m^δ) <span class="text-yellow-300">do</span>
              </div>
              <div class="algorithm-line">
                <span class="algorithm-line-number">6</span>&nbsp;&nbsp;d = m^δ(X_i)
              </div>
              <div class="algorithm-line">
                <span class="algorithm-line-number">7</span>&nbsp;&nbsp;X_i = X_i ⊔ d
              </div>
              <div class="algorithm-line">
                <span class="algorithm-line-number">8</span>&nbsp;&nbsp;D_i[c_i] = d          <span class="text-gray-500">// 存储带序列号的增量</span>
              </div>
              <div class="algorithm-line">
                <span class="algorithm-line-number">9</span>&nbsp;&nbsp;c_i = c_i + 1
              </div>
              <div class="algorithm-line">
                <span class="algorithm-line-number">10</span><span class="text-yellow-300">end upon</span>
              </div>
              <div class="algorithm-line">
                <span class="algorithm-line-number">11</span>
              </div>
              <div class="algorithm-line">
                <span class="algorithm-line-number">12</span>
                <span class="text-green-400">// 接收delta-interval</span>
              </div>
              <div class="algorithm-line">
                <span class="algorithm-line-number">13</span>
                <span class="text-yellow-300">upon</span> receive(delta, Δ_j^{a,b}, b) from j <span class="text-yellow-300">do</span>
              </div>
              <div class="algorithm-line">
                <span class="algorithm-line-number">14</span>&nbsp;&nbsp;X_i = X_i ⊔ Δ_j^{a,b}   <span class="text-gray-500">// 合并增量区间</span>
              </div>
              <div class="algorithm-line">
                <span class="algorithm-line-number">15</span>&nbsp;&nbsp;send(ack, b) to j       <span class="text-gray-500">// 发送确认</span>
              </div>
              <div class="algorithm-line">
                <span class="algorithm-line-number">16</span><span class="text-yellow-300">end upon</span>
              </div>
              <div class="algorithm-line">
                <span class="algorithm-line-number">17</span>
              </div>
              <div class="algorithm-line">
                <span class="algorithm-line-number">18</span>
                <span class="text-green-400">// 接收确认</span>
              </div>
              <div class="algorithm-line">
                <span class="algorithm-line-number">19</span>
                <span class="text-yellow-300">upon</span> receive(ack, b) from j <span class="text-yellow-300">do</span>
              </div>
              <div class="algorithm-line">
                <span class="algorithm-line-number">20</span>&nbsp;&nbsp;A_i[j] = max(A_i[j], b) <span class="text-gray-500">// 更新确认位置</span>
              </div>
              <div class="algorithm-line">
                <span class="algorithm-line-number">21</span><span class="text-yellow-300">end upon</span>
              </div>
              <div class="algorithm-line">
                <span class="algorithm-line-number">22</span>
              </div>
              <div class="algorithm-line">
                <span class="algorithm-line-number">23</span>
                <span class="text-green-400">// 周期性发送</span>
              </div>
              <div class="algorithm-line">
                <span class="algorithm-line-number">24</span>
                <span class="text-yellow-300">upon</span> periodic_send <span class="text-yellow-300">do</span>
              </div>
              <div class="algorithm-line">
                <span class="algorithm-line-number">25</span>&nbsp;&nbsp;j = random_neighbor()
              </div>
              <div class="algorithm-line">
                <span class="algorithm-line-number">26</span>&nbsp;&nbsp;<span class="text-yellow-300">if</span> D_i为空 ∨ A_i[j] < min(dom D_i) <span class="text-yellow-300">then</span>
              </div>
              <div class="algorithm-line">
                <span class="algorithm-line-number">27</span>&nbsp;&nbsp;&nbsp;&nbsp;send(X_i) to j     <span class="text-gray-500">// 发送完整状态</span>
              </div>
              <div class="algorithm-line">
                <span class="algorithm-line-number">28</span>&nbsp;&nbsp;<span class="text-yellow-300">else if</span> A_i[j] < c_i <span class="text-yellow-300">then</span>
              </div>
              <div class="algorithm-line">
                <span class="algorithm-line-number">29</span>&nbsp;&nbsp;&nbsp;&nbsp;a = A_i[j] + 1
              </div>
              <div class="algorithm-line">
                <span class="algorithm-line-number">30</span>&nbsp;&nbsp;&nbsp;&nbsp;Δ = ⊔ {D_i[k] | a ≤ k < c_i}
              </div>
              <div class="algorithm-line">
                <span class="algorithm-line-number">31</span>&nbsp;&nbsp;&nbsp;&nbsp;send(delta, Δ, c_i) to j <span class="text-gray-500">// 发送delta-interval</span>
              </div>
              <div class="algorithm-line">
                <span class="algorithm-line-number">32</span>&nbsp;&nbsp;<span class="text-yellow-300">end if</span>
              </div>
              <div class="algorithm-line">
                <span class="algorithm-line-number">33</span>&nbsp;&nbsp;<span class="text-yellow-300">if</span> ∀j. A_i[j] ≥ min(dom D_i) <span class="text-yellow-300">then</span>
              </div>
              <div class="algorithm-line">
                <span class="algorithm-line-number">34</span>&nbsp;&nbsp;&nbsp;&nbsp;移除已确认的增量   <span class="text-gray-500">// 垃圾回收</span>
              </div>
              <div class="algorithm-line">
                <span class="algorithm-line-number">35</span>&nbsp;&nbsp;<span class="text-yellow-300">end if</span>
              </div>
              <div class="algorithm-line">
                <span class="algorithm-line-number">36</span><span class="text-yellow-300">end upon</span>
              </div>
            </div>
            
            <div class="bg-yellow-50 p-4 rounded-lg border border-yellow-200">
              <h5 class="font-bold text-yellow-700 mb-2 flex items-center">
                <i class="fas fa-lightbulb mr-2"></i>因果一致性保障的关键机制
              </h5>
              <ul class="list-disc list-inside space-y-2 text-sm text-gray-700">
                <li><strong>序列号跟踪</strong>：每个增量有唯一序列号</li>
                <li><strong>确认机制</strong>：接收方确认已处理的增量区间</li>
                <li><strong>条件发送</strong>：只发送对方未确认的增量</li>
                <li><strong>状态回退</strong>：必要时发送完整状态</li>
                <li><strong>垃圾回收</strong>：清理所有副本已确认的增量</li>
              </ul>
            </div>
          </div>
        </div>
      </section>
      
      <!-- 应用实例 -->
      <section id="applications" class="content-section mobile-optimized mb-12 md:mb-16">
        <h2 class="text-2xl md:text-3xl font-bold text-gray-800 mb-6 md:mb-8 flex items-center">
          <i class="fas fa-boxes mr-3 text-blue-500"></i>
          应用实例
        </h2>
        
        <div class="space-y-8">
          <!-- δ-CRDTs组合 -->
          <div class="bg-white p-6 rounded-lg border border-gray-200 shadow-sm">
            <h3 class="font-bold text-gray-800 mb-4 text-lg">δ-CRDTs组合与应用实例</h3>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
              <div class="tech-card bg-blue-50 p-4 rounded-lg border border-blue-200">
                <h4 class="font-bold text-blue-700 text-base md:text-lg mb-2">
                  <i class="fas fa-layer-group mr-2"></i>简单组合
                </h4>
                <ul class="list-disc list-inside text-sm text-gray-700">
                  <li>对（Pair）：坐标级join</li>
                  <li>词典对（Lexicographic Pair）：优先级join</li>
                  <li>支持多组件组合</li>
                </ul>
              </div>
              
              <div class="tech-card bg-green-50 p-4 rounded-lg border border-green-200">
                <h4 class="font-bold text-green-700 text-base md:text-lg mb-2">
                  <i class="fas fa-user-secret mr-2"></i>匿名δ-CRDTs
                </h4>
                <ul class="list-disc list-inside text-sm text-gray-700">
                  <li>GSet：仅增长集合</li>
                  <li>2PSet：两阶段集合</li>
                  <li>LWW Set：最后写入者获胜集合</li>
                </ul>
              </div>
              
              <div class="tech-card bg-purple-50 p-4 rounded-lg border border-purple-200">
                <h4 class="font-bold text-purple-700 text-base md:text-lg mb-2">
                  <i class="fas fa-id-card mr-2"></i>命名δ-CRDTs
                </h4>
                <ul class="list-disc list-inside text-sm text-gray-700">
                  <li>PNCounter：正负计数器</li>
                  <li>LexCounter：词典计数器</li>
                  <li>基于副本标识符</li>
                </ul>
              </div>
            </div>
          </div>
          
          <!-- Causal CRDTs -->
          <div class="bg-white p-6 rounded-lg border border-gray-200 shadow-sm">
            <h3 class="font-bold text-gray-800 mb-4 text-lg">Causal CRDTs框架</h3>
            
            <div class="mb-6">
              <h4 class="font-bold text-blue-700 mb-3">核心组件</h4>
              
              <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div class="bg-gray-50 p-4 rounded-lg">
                  <h5 class="font-bold text-gray-700 mb-2">因果上下文（Causal Context）</h5>
                  <div class="code-block text-xs">
                    // 点（dot）集合<br>
                    dot = (replica_id, seq_num)<br>
                    c ⊆ {dot}
                  </div>
                  <p class="text-sm text-gray-600 mt-2">记录已知事件的唯一标识符集合</p>
                </div>
                
                <div class="bg-gray-50 p-4 rounded-lg">
                  <h5 class="font-bold text-gray-700 mb-2">点存储（Dot Store）</h5>
                  <div class="code-block text-xs">
                    // 三种类型：<br>
                    DotSet ⊆ {dot}<br>
                    DotFun<V>: dot → V<br>
                    DotMap<K,V>: K → DotStore<V>
                  </div>
                  <p class="text-sm text-gray-600 mt-2">存储数据类型特定信息的容器</p>
                </div>
                
                <div class="bg-gray-50 p-4 rounded-lg">
                  <h5 class="font-bold text-gray-700 mb-2">因果状态</h5>
                  <div class="code-block text-xs">
                    Causal(V) = <br>
                    (store: DotStore<V>, <br>
                     context: CausalContext)
                  </div>
                  <p class="text-sm text-gray-600 mt-2">点存储和因果上下文的组合</p>
                </div>
              </div>
            </div>
            
            <!-- 因果CRDTs实例 -->
            <div class="space-y-4">
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="bg-blue-50 p-4 rounded-lg">
                  <h5 class="font-bold text-blue-700 mb-2">Enable-Wins Flag</h5>
                  <p class="text-sm text-gray-700">启用操作获胜的标志，用于布尔状态管理</p>
                </div>
                
                <div class="bg-green-50 p-4 rounded-lg">
                  <h5 class="font-bold text-green-700 mb-2">Multi-Value Register</h5>
                  <p class="text-sm text-gray-700">多值寄存器，支持读写和清除操作</p>
                </div>
              </div>
              
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="bg-purple-50 p-4 rounded-lg">
                  <h5 class="font-bold text-purple-700 mb-2">Add-Wins Set</h5>
                  <p class="text-sm text-gray-700">添加获胜集合，并发添加和移除时添加获胜</p>
                </div>
                
                <div class="bg-yellow-50 p-4 rounded-lg">
                  <h5 class="font-bold text-yellow-700 mb-2">Remove-Wins Set</h5>
                  <p class="text-sm text-gray-700">移除获胜集合，并发添加和移除时移除获胜</p>
                </div>
              </div>
            </div>
          </div>
          
          <!-- 映射组合 -->
          <div class="bg-white p-6 rounded-lg border border-gray-200 shadow-sm">
            <h3 class="font-bold text-gray-800 mb-4 text-lg">映射组合（ORMap）</h3>
            
            <div class="bg-gradient-to-r from-blue-50 to-purple-50 p-6 rounded-lg border-l-4 border-blue-500">
              <h4 class="font-bold text-blue-700 mb-3 flex items-center">
                <i class="fas fa-map mr-2"></i>观察移除映射（Observed-Remove Map）
              </h4>
              
              <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                  <h5 class="font-bold text-gray-700 mb-2">设计特点</h5>
                  <ul class="list-disc list-inside text-sm space-y-2 text-gray-700">
                    <li>支持嵌套因果CRDTs</li>
                    <li>共享因果上下文</li>
                    <li>观察移除语义</li>
                    <li>支持递归组合</li>
                  </ul>
                </div>
                
                <div>
                  <h5 class="font-bold text-gray-700 mb-2">关键机制</h5>
                  <ul class="list-disc list-inside text-sm space-y-2 text-gray-700">
                    <li>移除视为"撤销"所有相关操作</li>
                    <li>记住被移除条目的点</li>
                    <li>避免重新创建时的异常</li>
                    <li>支持apply操作应用嵌套操作</li>
                  </ul>
                </div>
              </div>
              
              <div class="mt-4 code-block">
                // ORMap定义<br>
                ORMap⟨K, V⟩ = Causal(DotMap⟨K, V⟩)<br><br>
                // 应用嵌套操作<br>
                apply(o_i^δ, k, (m, c)) =<br>
                &nbsp;&nbsp;let (v, _) = (m(k), c) in  // 获取当前值<br>
                &nbsp;&nbsp;let (v', c') = o_i^δ(v, c) in // 应用操作<br>
                &nbsp;&nbsp;(m{k ↦ v'}, c')            // 返回新映射
              </div>
            </div>
          </div>
        </div>
      </section>
      
      <!-- 结论与不足 -->
      <section id="conclusion" class="content-section mobile-optimized mb-12 md:mb-16">
        <h2 class="text-2xl md:text-3xl font-bold text-gray-800 mb-6 md:mb-8 flex items-center">
          <i class="fas fa-flag-checkered mr-3 text-blue-500"></i>
          结论与不足
        </h2>
        
        <div class="space-y-8">
          <!-- 结论 -->
          <div class="bg-gradient-to-r from-green-50 to-blue-50 border-l-4 border-green-500 p-6 rounded-r-lg">
            <h3 class="font-bold text-green-700 mb-4 text-lg flex items-center">
              <i class="fas fa-check-circle mr-2"></i>论文主要结论
            </h3>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                <h4 class="font-bold text-blue-700 mb-3">技术贡献</h4>
                <ul class="list-disc list-inside space-y-2 text-gray-700">
                  <li><strong>δ-CRDTs新范式</strong>：结合状态型和操作型CRDTs优势</li>
                  <li><strong>Delta-mutators</strong>：解耦变更与状态，支持增量传播</li>
                  <li><strong>因果一致性算法</strong>：通过delta-interval和因果合并条件实现</li>
                  <li><strong>Causal CRDTs框架</strong>：基于点存储的通用设计模式</li>
                </ul>
              </div>
              
              <div>
                <h4 class="font-bold text-blue-700 mb-3">实际价值</h4>
                <ul class="list-disc list-inside space-y-2 text-gray-700">
                  <li><strong>通信优化</strong>：显著减少消息大小和网络开销</li>
                  <li><strong>可靠性</strong>：保持状态型CRDTs的容错能力</li>
                  <li><strong>通用性</strong>：适用于多种数据类型和组合</li>
                  <li><strong>实用性</strong>：已有C++和Erlang实现，应用于生产系统</li>
                </ul>
              </div>
            </div>
          </div>
          
          <!-- 技术优势 -->
          <div class="bg-white p-6 rounded-lg border border-gray-200 shadow-sm">
            <h3 class="font-bold text-gray-800 mb-4 text-lg">δ-CRDTs的技术优势</h3>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
              <div class="tech-card bg-blue-50 p-4 rounded-lg border border-blue-200">
                <h4 class="font-bold text-blue-700 text-base md:text-lg mb-2">
                  <i class="fas fa-shipping-fast mr-2"></i>通信效率
                </h4>
                <p class="text-sm text-gray-700">传输增量而非完整状态，显著减少带宽使用</p>
                <div class="mt-2 text-xs text-blue-600 font-medium">
                  <i class="fas fa-arrow-down mr-1"></i>消息大小减少90%+
                </div>
              </div>
              
              <div class="tech-card bg-green-50 p-4 rounded-lg border border-green-200">
                <h4 class="font-bold text-green-700 text-base md:text-lg mb-2">
                  <i class="fas fa-shield-alt mr-2"></i>网络容错
                </h4>
                <p class="text-sm text-gray-700">容忍消息丢失、重复和无序，无需可靠传输层</p>
                <div class="mt-2 text-xs text-green-600 font-medium">
                  <i class="fas fa-check-circle mr-1"></i>join操作幂等、交换、结合
                </div>
              </div>
              
              <div class="tech-card bg-purple-50 p-4 rounded-lg border border-purple-200">
                <h4 class="font-bold text-purple-700 text-base md:text-lg mb-2">
                  <i class="fas fa-layer-group mr-2"></i>设计灵活性
                </h4>
                <p class="text-sm text-gray-700">支持增量或完整状态传播，适应不同场景需求</p>
                <div class="mt-2 text-xs text-purple-600 font-medium">
                  <i class="fas fa-balance-scale mr-1"></i>性能与一致性权衡
                </div>
              </div>
            </div>
          </div>
          
          <!-- 不足之处 -->
          <div class="bg-gradient-to-r from-yellow-50 to-orange-50 border-l-4 border-yellow-500 p-6 rounded-r-lg">
            <h3 class="font-bold text-yellow-700 mb-4 text-lg flex items-center">
              <i class="fas fa-exclamation-circle mr-2"></i>论文的不足之处
            </h3>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div class="space-y-4">
                <div class="bg-white/80 p-4 rounded-lg">
                  <h4 class="font-bold text-gray-800 mb-2">技术局限性</h4>
                  <ul class="list-disc list-inside text-sm space-y-2 text-gray-700">
                    <li><strong>实现复杂度</strong>：δ-CRDTs设计比标准CRDTs复杂</li>
                    <li><strong>内存开销</strong>：需要维护增量缓冲区和确认信息</li>
                    <li><strong>因果一致性成本</strong>：算法2需要序列号和确认机制</li>
                    <li><strong>恢复复杂性</strong>：崩溃恢复需要持久化计数器和状态</li>
                  </ul>
                </div>
                
                <div class="bg-white/80 p-4 rounded-lg">
                  <h4 class="font-bold text-gray-800 mb-2">未解决的问题</h4>
                  <ul class="list-disc list-inside text-sm space-y-2 text-gray-700">
                    <li><strong>大规模评估</strong>：缺乏大规模部署的性能数据</li>
                    <li><strong>动态成员</strong>：动态添加/移除副本的优化不足</li>
                    <li><strong>混合策略</strong>：未探讨delta大小自适应调整</li>
                    <li><strong>实际部署障碍</strong>：需要系统级支持而非仅库实现</li>
                  </ul>
                </div>
              </div>
              
              <div class="space-y-4">
                <div class="bg-white/80 p-4 rounded-lg">
                  <h4 class="font-bold text-gray-800 mb-2">研究局限性</h4>
                  <ul class="list-disc list-inside text-sm space-y-2 text-gray-700">
                    <li><strong>形式化验证</strong>：虽然提供证明，但未使用形式化工具验证</li>
                    <li><strong>比较基准</strong>：与最新CRDT变体的对比不足</li>
                    <li><strong>实际工作负载</strong>：评估使用合成工作负载而非真实trace</li>
                    <li><strong>异构网络</strong>：未考虑网络带宽和延迟的异质性</li>
                  </ul>
                </div>
                
                <div class="bg-white/80 p-4 rounded-lg">
                  <h4 class="font-bold text-gray-800 mb-2">实际应用挑战</h4>
                  <ul class="list-disc list-inside text-sm space-y-2 text-gray-700">
                    <li><strong>学习曲线</strong>：δ-CRDTs概念对开发者不够直观</li>
                    <li><strong>调试困难</strong>：增量传播使调试和监控更复杂</li>
                    <li><strong>集成成本</strong>：现有系统迁移到δ-CRDTs需要重构</li>
                    <li><strong>工具链缺失</strong>：缺乏成熟的开发、测试和监控工具</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
          
          <!-- 未来研究方向 -->
          <div class="bg-white p-6 rounded-lg border border-gray-200 shadow-sm">
            <h3 class="font-bold text-gray-800 mb-4 text-lg">未来研究方向</h3>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
              <div class="tech-card bg-blue-50 p-4 rounded-lg border border-blue-200">
                <h4 class="font-bold text-blue-700 text-base md:text-lg mb-2">
                  <i class="fas fa-brain mr-2"></i>自适应δ-CRDTs
                </h4>
                <p class="text-sm text-gray-700">根据网络条件和应用需求动态调整delta大小和发送频率</p>
              </div>
              
              <div class="tech-card bg-green-50 p-4 rounded-lg border border-green-200">
                <h4 class="font-bold text-green-700 text-base md:text-lg mb-2">
                  <i class="fas fa-compress-arrows-alt mr-2"></i>压缩优化
                </h4>
                <p class="text-sm text-gray-700">开发针对delta的高效压缩算法，进一步减少通信开销</p>
              </div>
              
              <div class="tech-card bg-purple-50 p-4 rounded-lg border border-purple-200">
                <h4 class="font-bold text-purple-700 text-base md:text-lg mb-2">
                  <i class="fas fa-network-wired mr-2"></i>网络感知
                </h4>
                <p class="text-sm text-gray-700">考虑网络拓扑和链路质量，优化delta传播路径和策略</p>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>
  </div>
  
  <!-- 交互脚本 -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const navItems = document.querySelectorAll('.nav-item');
      const sections = document.querySelectorAll('section');
      
      // 高亮当前导航项
      function highlightNav() {
        let current = '';
        sections.forEach(section => {
          const sectionTop = section.offsetTop;
          const sectionHeight = section.clientHeight;
          if (window.scrollY >= (sectionTop - 100)) {
            current = section.getAttribute('id');
          }
        });

        navItems.forEach(item => {
          item.classList.remove('active');
          if (item.getAttribute('href') === `#${current}`) {
            item.classList.add('active');
          }
        });
      }

      window.addEventListener('scroll', highlightNav);
      
      // 平滑滚动
      navItems.forEach(item => {
        item.addEventListener('click', function(e) {
          e.preventDefault();
          const targetId = this.getAttribute('href');
          const targetSection = document.querySelector(targetId);
          window.scrollTo({
            top: targetSection.offsetTop - 80,
            behavior: 'smooth'
          });
        });
      });
      
      // 初始高亮
      highlightNav();
      
      // 技术细节展开动画
      const detailsElements = document.querySelectorAll('details.technical-details');
      detailsElements.forEach(details => {
        details.addEventListener('toggle', function() {
          if (this.open) {
            this.style.transition = 'all 0.3s ease';
          }
        });
      });
      
      // 移动端导航优化
      function updateNavForMobile() {
        const nav = document.querySelector('.nav-scroll');
        if (window.innerWidth < 768) {
          nav.classList.add('overflow-x-auto', 'whitespace-nowrap');
          nav.classList.remove('justify-center');
        } else {
          nav.classList.remove('overflow-x-auto', 'whitespace-nowrap');
        }
      }
      
      window.addEventListener('resize', updateNavForMobile);
      updateNavForMobile();
    });
  </script>
  
<!-- AI生成内容标识 --><div id="ai-badge" style="position: fixed; bottom: 20px; right: 20px; z-index: 9999; cursor: pointer;"><div style="background: linear-gradient(135deg, #6366f1, #8b5cf6); color: white; padding: 8px 16px; border-radius: 20px; font-size: 14px; font-weight: 600; box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3); display: flex; align-items: center; gap: 6px; transition: all 0.3s ease;"><span style="font-size: 16px;">🤖</span><span>AI生成</span></div></div><script>(function(){const badge=document.getElementById('ai-badge');let expanded=false; badge.addEventListener('click',function(){if(!expanded){const details=document.createElement('div');details.id='ai-details';details.style.cssText="position:absolute;bottom:50px;right:0;background:white;color:#333;padding:12px;border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,0.15);width:200px;font-size:12px;line-height:1.5;border:1px solid #e5e7eb;";details.innerHTML='<div style="font-weight:600;margin-bottom:8px;color:#6366f1">人工智能生成内容</div><div style="color:#666">本页面内容通过AI技术自动生成，仅供参考。生成时间：'+new Date().toLocaleDateString('zh-CN')+'</div>';badge.appendChild(details);expanded=true;}else{const details=document.getElementById('ai-details');if(details)details.remove();expanded=false;}});})();</script></body>
</html>