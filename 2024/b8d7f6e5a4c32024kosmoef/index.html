<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kosmo: Efficient Online Miss Ratio Curve Generation for Eviction Policy Evaluation</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    body { 
      font-family: 'Inter', sans-serif; 
      scroll-behavior: smooth;
    }
    .mobile-optimized { 
      margin-bottom: 2rem !important; 
    }
    @media (max-width: 768px) {
      .content-section { 
        padding: 1rem; 
        margin-bottom: 1.5rem;
      }
      .technical-details {
        margin: 1rem 0;
      }
    }
    .hide-scrollbar {
      -ms-overflow-style: none;
      scrollbar-width: none;
    }
    .hide-scrollbar::-webkit-scrollbar {
      display: none;
    }
    .nav-item {
      @apply px-4 py-2 rounded-lg transition-colors duration-200 text-gray-600 hover:text-blue-600 hover:bg-blue-50;
    }
    .nav-item.active {
      @apply text-blue-600 bg-blue-100;
    }
  </style>
</head>
<body class="bg-gradient-to-br from-blue-400 via-purple-500 to-pink-400 min-h-screen">
  <!-- 导航系统 -->
  <nav class="nav-scroll bg-white/90 backdrop-blur-sm sticky top-0 z-50 border-b border-gray-200">
    <div class="container mx-auto px-4 py-3">
      <div class="flex overflow-x-auto space-x-6 hide-scrollbar">
        <a href="#abstract" class="nav-item whitespace-nowrap"><i class="fas fa-file-alt mr-2"></i>摘要</a>
        <a href="#background-motivation" class="nav-item whitespace-nowrap"><i class="fas fa-layer-group mr-2"></i>背景与动机</a>
        <a href="#challenges" class="nav-item whitespace-nowrap"><i class="fas fa-exclamation-triangle mr-2"></i>问题与挑战</a>
        <a href="#design-implementation" class="nav-item whitespace-nowrap"><i class="fas fa-cogs mr-2"></i>设计与实现</a>
        <a href="#evaluation" class="nav-item whitespace-nowrap"><i class="fas fa-chart-line mr-2"></i>测试与评估</a>
        <a href="#conclusion" class="nav-item whitespace-nowrap"><i class="fas fa-flag-checkered mr-2"></i>结论</a>
      </div>
    </div>
  </nav>

  <div class="container mx-auto px-4 py-8">
    <div class="bg-white/95 backdrop-blur-sm rounded-xl shadow-lg p-6">
      <!-- 论文标题和元数据 -->
      <div class="mb-12 md:mb-16">
        <h1 class="text-3xl md:text-4xl font-bold text-gray-800 mb-6 text-center md:text-left">
          Kosmo: Efficient Online Miss Ratio Curve Generation for Eviction Policy Evaluation
        </h1>
        
        <div class="bg-gradient-to-r from-blue-50 to-purple-50 border-l-4 border-blue-500 p-6 rounded-r-lg">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-gray-700">
            <div class="space-y-3">
              <div>
                <strong class="text-blue-700 block mb-1">作者信息</strong>
                <div class="text-lg">Kia Shakiba, Sari Sultan, and Michael Stumm</div>
                <div class="text-sm text-gray-600 mt-1">University of Toronto</div>
              </div>
              <div>
                <strong class="text-blue-700 block mb-1">发表信息</strong>
                <div>FAST '24 (22nd USENIX Conference on File and Storage Technologies)</div>
                <div class="text-sm text-gray-600">February 27-29, 2024 • Santa Clara, CA, USA</div>
              </div>
            </div>
            <div class="space-y-3">
              <div>
                <strong class="text-blue-700 block mb-1">DOI标识</strong>
                <div class="font-mono text-sm bg-white px-3 py-2 rounded border">FAST24-shakiba</div>
              </div>
              <div>
                <strong class="text-blue-700 block mb-1">核心关键词</strong>
                <div class="flex flex-wrap gap-2 mt-1">
                  <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm">Miss Ratio Curve (MRC)</span>
                  <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm">Eviction Policy</span>
                  <span class="bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm">In-Memory Cache</span>
                  <span class="bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-sm">Online Analysis</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- 核心贡献 -->
      <div class="bg-gradient-to-r from-green-50 to-blue-50 border-l-4 border-green-500 p-4 md:p-6 rounded-r-lg mb-12 md:mb-16">
        <h4 class="font-bold text-green-700 text-xl mb-4 flex items-center">
          <i class="fas fa-trophy mr-3"></i>论文核心贡献
        </h4>
        <ul class="list-disc list-inside space-y-3 text-gray-700">
          <li><strong>Kosmo算法</strong>：提出了一种新的在线Miss Ratio曲线生成算法，能够同时为多种驱逐策略（如LFU、FIFO、2Q、LRFU）生成MRC。</li>
          <li><strong>驱逐映射 (Eviction Maps)</strong>：创新性地引入驱逐映射数据结构，使得不同大小的缓存堆栈能够使用单一的数据副本动态重建，大幅降低内存开销。</li>
          <li><strong>性能提升</strong>：相比现有技术MiniSim，Kosmo平均内存开销降低3.6倍（最高可达36倍），吞吐量提升1.3倍，同时保持了相当的精度。</li>
          <li><strong>应用范围拓展</strong>：实现了对不支持包含性属性（Inclusion Property）的驱逐策略的MRC高效生成，使得在线缓存配置分析成为可能。</li>
        </ul>
      </div>
      
      <!-- 摘要 -->
      <section id="abstract" class="content-section mobile-optimized mb-12 md:mb-16">
        <h2 class="text-2xl md:text-3xl font-bold text-gray-800 mb-6 md:mb-8 flex items-center">
          <i class="fas fa-file-alt mr-3 text-blue-500"></i>
          摘要
        </h2>
        <div class="prose max-w-none text-gray-700">
          <p class="mb-4">内存缓存对于减少后端存储负载至关重要。Miss Ratio Curve是配置缓存大小和驱逐策略的重要工具。</p>
          <p class="mb-4">现有方法MiniSim能够为非LRU策略生成MRC，但其内存开销巨大，不适合在线分析。</p>
          <p class="mb-4">作者提出的Kosmo算法，通过引入“驱逐映射”数据结构，能够同时为LFU、FIFO、2Q、LRFU等多种驱逐策略高效生成MRC。</p>
          <p>在包含约1260亿次访问的52个公开跟踪数据上的评估表明，相比配置100个模拟缓存的MiniSim，Kosmo平均内存开销降低3.6倍，吞吐量提升1.3倍。</p>
        </div>
      </section>
      
      <!-- 背景与动机 -->
      <section id="background-motivation" class="content-section mobile-optimized mb-12 md:mb-16">
        <h2 class="text-2xl md:text-3xl font-bold text-gray-800 mb-6 md:mb-8 flex items-center">
          <i class="fas fa-layer-group mr-3 text-blue-500"></i>
          背景与动机
        </h2>
        <div class="space-y-6">
          <div class="bg-white p-4 rounded-lg border border-gray-200">
            <h3 class="font-bold text-lg text-gray-800 mb-3"><i class="fas fa-memory mr-2 text-blue-500"></i>内存缓存的重要性</h3>
            <ul class="list-disc list-inside space-y-2 text-gray-700">
              <li>广泛应用于Redis, Memcached等系统，以降低延迟和提升可扩展性。</li>
              <li>在数据中心运营成本中占比很高（有时超过60%）。</li>
              <li>云环境中，缓存大小与成本直接相关。</li>
            </ul>
          </div>

          <div class="bg-white p-4 rounded-lg border border-gray-200">
            <h3 class="font-bold text-lg text-gray-800 mb-3"><i class="fas fa-chart-line mr-2 text-green-500"></i>Miss Ratio Curve (MRC)</h3>
            <ul class="list-disc list-inside space-y-2 text-gray-700">
              <li>MRC描绘了特定驱逐策略下，<strong>未命中率</strong>随<strong>缓存大小</strong>变化的曲线。</li>
              <li>是理解和权衡缓存成本与性能的关键工具。</li>
              <li>可识别“悬崖”（Cliffs）和“平台”（Plateaus），指导容量调整。</li>
            </ul>
            <!-- 原图1占位符 -->
            <details class="technical-details bg-gray-50 rounded-lg p-4 md:p-6 mb-8 mt-6">
              <summary class="cursor-pointer font-semibold text-lg md:text-xl text-gray-800 hover:text-blue-600 transition-colors py-2">
                <i class="fas fa-chart-line mr-2"></i>技术细节：图1 - MRC示例
              </summary>
              <div class="mt-6 space-y-6">
                <div class="original-figure-container">
                  <div class="flex flex-col sm:flex-row sm:items-center justify-between mb-4 gap-2">
                    <h5 class="font-semibold text-gray-700 text-base md:text-lg">
                      <i class="fas fa-image mr-2 text-blue-500"></i>
                      原图 1: MRC generated for MSR src1 workload using the Least Frequently Used (LFU) eviction policy.
                    </h5>
                    <span class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded self-start sm:self-auto">论文原图</span>
                  </div>
                  <div class="image-placeholder bg-gradient-to-br from-gray-100 to-gray-200 p-6 md:p-8 rounded-lg text-center border-2 border-dashed border-gray-300">
                    <img src="./images/fig1.png" alt="论文图1: 使用LFU驱逐策略的MSR src1工作负载的MRC曲线示例，展示了未命中率随缓存大小（0-400GB）的变化，包含明显的悬崖和平台区域。" class="max-w-full h-auto rounded-lg">
                  </div>
                  <div class="mt-4 text-sm text-gray-600 bg-gray-50 p-3 rounded border">
                    <strong>原图图注:</strong> MRC generated for MSR src1 workload using the Least Frequently Used (LFU) eviction policy.
                  </div>
                </div>
                <div class="bg-blue-50 p-4 rounded-lg border border-blue-200">
                  <h5 class="font-semibold text-blue-700 mb-3 flex items-center text-base md:text-lg">
                    <i class="fas fa-info-circle mr-2"></i>技术解释：
                  </h5>
                  <ul class="list-disc list-inside space-y-2 text-sm md:text-base text-gray-700">
                    <li><strong>悬崖 (Cliff):</strong> 在160GB到190GB之间，未命中率急剧下降（悬崖）。这表明仅增加30GB缓存，未命中率即可改善约30%。</li>
                    <li><strong>平台 (Plateau):</strong> 在70-160GB和190-270GB之间，曲线相对平坦。这意味着在这些区间内调整缓存大小，对未命中率影响不大。</li>
                    <li><strong>决策指导:</strong> MRC为缓存容量配置提供了直观的数据驱动决策依据，帮助在成本和性能之间找到最佳平衡点。</li>
                  </ul>
                </div>
              </div>
            </details>
          </div>

          <div class="bg-white p-4 rounded-lg border border-gray-200">
            <h3 class="font-bold text-lg text-gray-800 mb-3"><i class="fas fa-filter mr-2 text-purple-500"></i>驱逐策略多样性</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm md:text-base">
              <div class="bg-blue-50 p-3 rounded">
                <h4 class="font-semibold text-blue-700 mb-2">LRU (Least Recently Used)</h4>
                <p class="text-gray-700">最常用，但并非所有场景最优。</p>
              </div>
              <div class="bg-green-50 p-3 rounded">
                <h4 class="font-semibold text-green-700 mb-2">LFU (Least Frequently Used)</h4>
                <p class="text-gray-700">对Zipf分布工作负载效果好，有时能降低14%未命中率。</p>
              </div>
              <div class="bg-yellow-50 p-3 rounded">
                <h4 class="font-semibold text-yellow-700 mb-2">FIFO (First-In-First-Out)</h4>
                <p class="text-gray-700">实现开销低，对大间隔扫描行为有效。</p>
              </div>
              <div class="bg-purple-50 p-3 rounded">
                <h4 class="font-semibold text-purple-700 mb-2">2Q / LRFU</h4>
                <p class="text-gray-700">结合近期与频率，在某些工作负载下表现更优。</p>
              </div>
            </div>
          </div>

          <div class="bg-white p-4 rounded-lg border border-gray-200">
            <h3 class="font-bold text-lg text-gray-800 mb-3"><i class="fas fa-project-diagram mr-2 text-red-500"></i>包含性属性 (Inclusion Property)</h3>
            <ul class="list-disc list-inside space-y-2 text-gray-700">
              <li><strong>定义:</strong> 对于相同访问轨迹，大小为S的缓存中包含的所有对象，也必然包含在任何更大（S'>S）的缓存中。</li>
              <li><strong>重要性:</strong> 许多高效MRC生成算法（如Mattson）要求驱逐策略满足此属性（如LRU）。</li>
              <li><strong>关键问题:</strong> 许多实用的非LRU策略（如<strong>Practical LFU</strong>）<strong>不满足</strong>包含性属性，这使得传统算法失效。</li>
            </ul>
            <!-- 原表1占位符 -->
            <div class="mt-4 original-figure-container bg-white p-4 rounded-lg border border-gray-200 shadow-sm mb-6">
              <div class="flex flex-col sm:flex-row sm:items-center justify-between mb-3 gap-2">
                <h5 class="font-semibold text-gray-700">
                  <i class="fas fa-table mr-2 text-blue-500"></i>
                  表1: 样本轨迹展示Practical LFU缓存违反包含性属性
                </h5>
                <span class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded self-start sm:self-auto">论文原表</span>
              </div>
              <div class="overflow-x-auto">
                <table class="min-w-full text-sm border border-gray-300">
                  <thead class="bg-gray-100">
                    <tr>
                      <th class="border p-2">时间</th>
                      <th class="border p-2">访问</th>
                      <th class="border p-2">LFU缓存大小3</th>
                      <th class="border p-2">LFU缓存大小4</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr><td class="border p-2">1</td><td class="border p-2">a</td><td class="border p-2">a(1)</td><td class="border p-2">a(1)</td></tr>
                    <tr><td class="border p-2">9</td><td class="border p-2">f</td><td class="border p-2">d(2), e(1), f(1)</td><td class="border p-2">b(2), d(2), a(2), f(1)</td></tr>
                  </tbody>
                </table>
              </div>
              <div class="mt-3 text-sm text-gray-600 bg-gray-50 p-3 rounded border">
                <strong>表注:</strong> 在时间9，对象“e”存在于大小为3的缓存中，但不在大小为4的缓存中。这违反了包含性属性。
              </div>
            </div>
          </div>
        </div>
      </section>
      
      <!-- 问题与挑战 -->
      <section id="challenges" class="content-section mobile-optimized mb-12 md:mb-16">
        <h2 class="text-2xl md:text-3xl font-bold text-gray-800 mb-6 md:mb-8 flex items-center">
          <i class="fas fa-exclamation-triangle mr-3 text-blue-500"></i>
          问题与挑战
        </h2>
        <div class="space-y-6">
          <div class="bg-gradient-to-r from-red-50 to-orange-50 border-l-4 border-red-500 p-4 md:p-6 rounded-r-lg">
            <h4 class="font-bold text-red-700 mb-4 flex items-center text-lg md:text-xl">
              <i class="fas fa-bug mr-3"></i>现有方案 MiniSim 的局限性
            </h4>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                <h5 class="font-semibold text-gray-800 mb-2">1. 内存开销巨大</h5>
                <ul class="list-disc list-inside space-y-1 text-sm text-gray-700">
                  <li>独立模拟多个不同大小的缓存，数据不共享。</li>
                  <li>相同对象在不同缓存中被重复存储。</li>
                  <li><strong>实测数据:</strong> 生成单个LFU策略的MRC，平均消耗113MiB，极端情况达3.1GiB。</li>
                </ul>
              </div>
              <div>
                <h5 class="font-semibold text-gray-800 mb-2">2. 无法动态调整范围</h5>
                <ul class="list-disc list-inside space-y-1 text-sm text-gray-700">
                  <li>最大模拟缓存大小（C_max）必须在处理轨迹前固定。</li>
                  <li>在线分析时，工作集大小未知，导致资源浪费或粒度不足。</li>
                  <li>难以聚焦于实际工作集范围内的关键区域。</li>
                </ul>
              </div>
            </div>
          </div>

          <div class="bg-gradient-to-r from-yellow-50 to-amber-50 border-l-4 border-yellow-500 p-4 md:p-6 rounded-r-lg">
            <h4 class="font-bold text-yellow-700 mb-4 flex items-center text-lg md:text-xl">
              <i class="fas fa-question-circle mr-3"></i>核心挑战
            </h4>
            <ol class="list-decimal list-inside space-y-3 text-gray-700">
              <li><strong>如何为不满足包含性属性的驱逐策略高效生成MRC？</strong></li>
              <li><strong>如何大幅降低MRC生成过程中的内存开销？</strong></li>
              <li><strong>如何支持在线、实时的缓存配置分析？</strong></li>
              <li><strong>如何同时为多种驱逐策略生成MRC？</strong></li>
            </ol>
          </div>

          <div class="bg-white p-4 rounded-lg border border-gray-200">
            <h3 class="font-bold text-lg text-gray-800 mb-3"><i class="fas fa-balance-scale mr-2 text-purple-500"></i>Ideal vs Practical LFU MRC对比</h3>
            <p class="text-gray-700 mb-4">为理想LFU（满足包含性）生成的MRC，无法准确模拟实用LFU（不满足包含性）的实际未命中率。</p>
            <!-- 原图2占位符 -->
            <details class="technical-details bg-gray-50 rounded-lg p-4 md:p-6 mb-8 mt-6">
              <summary class="cursor-pointer font-semibold text-lg md:text-xl text-gray-800 hover:text-blue-600 transition-colors py-2">
                <i class="fas fa-chart-area mr-2"></i>技术细节：图2 - Ideal vs Practical LFU MRC
              </summary>
              <div class="mt-6 space-y-6">
                <div class="original-figure-container">
                  <div class="flex flex-col sm:flex-row sm:items-center justify-between mb-4 gap-2">
                    <h5 class="font-semibold text-gray-700 text-base md:text-lg">
                      <i class="fas fa-image mr-2 text-blue-500"></i>
                      原图 2: MRCs for ideal and practical LFU caches for the MSR src1 (left) and web (right) workloads.
                    </h5>
                    <span class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded self-start sm:self-auto">论文原图</span>
                  </div>
                  <div class="image-placeholder bg-gradient-to-br from-gray-100 to-gray-200 p-6 md:p-8 rounded-lg text-center border-2 border-dashed border-gray-300">
                    <img src="./images/fig2.png" alt="论文图2: 理想LFU与实用LFU缓存在MSR src1和web工作负载下的MRC对比，两者在特定缓存大小区间存在显著差异，证明理想模型不适用。" class="max-w-full h-auto rounded-lg">
                  </div>
                  <div class="mt-4 text-sm text-gray-600 bg-gray-50 p-3 rounded border">
                    <strong>原图图注:</strong> MRCs for ideal and practical LFU caches for the MSR src1 (left) and web (right) workloads.
                  </div>
                </div>
                <div class="bg-blue-50 p-4 rounded-lg border border-blue-200">
                  <h5 class="font-semibold text-blue-700 mb-3 flex items-center text-base md:text-lg">
                    <i class="fas fa-info-circle mr-2"></i>技术解释：
                  </h5>
                  <ul class="list-disc list-inside space-y-2 text-sm md:text-base text-gray-700">
                    <li><strong>差异显著:</strong> 对于MSR src1负载，在190-240GiB区间，理想LFU和实用LFU的MRC存在明显偏差。</li>
                    <li><strong>结论:</strong> 不能简单地使用为理想LFU（满足包含性）生成的MRC来指导实用LFU缓存的配置。</li>
                    <li><strong>必要性:</strong> 这强化了开发能够直接为实用驱逐策略（不满足包含性）生成MRC的新算法的必要性。</li>
                  </ul>
                </div>
              </div>
            </details>
          </div>
        </div>
      </section>
      
      <!-- 设计与实现 -->
      <section id="design-implementation" class="content-section mobile-optimized mb-12 md:mb-16">
        <h2 class="text-2xl md:text-3xl font-bold text-gray-800 mb-6 md:mb-8 flex items-center">
          <i class="fas fa-cogs mr-3 text-blue-500"></i>
          设计与实现：Kosmo算法
        </h2>
        <div class="space-y-8">
          <div class="bg-white p-4 md:p-6 rounded-lg border border-gray-200">
            <h3 class="font-bold text-xl text-gray-800 mb-4 flex items-center">
              <i class="fas fa-lightbulb mr-3 text-green-500"></i>核心思想：驱逐映射 (Eviction Maps)
            </h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                <h4 class="font-semibold text-gray-700 mb-2">MiniSim 方式</h4>
                <div class="bg-gray-100 p-3 rounded text-sm">
                  <p class="font-medium mb-2">为每个模拟缓存维护独立的堆栈</p>
                  <div class="flex space-x-2 items-center justify-center my-3">
                    <div class="text-center">
                      <div class="w-12 h-12 bg-blue-200 rounded mx-auto mb-1"></div>
                      <div class="text-xs">Cache 1</div>
                    </div>
                    <div class="text-center">
                      <div class="w-12 h-12 bg-blue-200 rounded mx-auto mb-1"></div>
                      <div class="text-xs">Cache 2</div>
                    </div>
                    <div class="text-center">
                      <div class="w-12 h-12 bg-blue-200 rounded mx-auto mb-1"></div>
                      <div class="text-xs">Cache N</div>
                    </div>
                  </div>
                  <p class="text-red-600 text-xs"><strong>问题:</strong> 数据重复存储，内存开销大。</p>
                </div>
              </div>
              <div>
                <h4 class="font-semibold text-gray-700 mb-2">Kosmo 方式</h4>
                <div class="bg-green-100 p-3 rounded text-sm">
                  <p class="font-medium mb-2">维护全局对象表 + 每个对象的驱逐映射</p>
                  <div class="text-center my-3">
                    <div class="w-20 h-20 bg-green-300 rounded-lg mx-auto mb-1 flex items-center justify-center">
                      <i class="fas fa-database text-white text-2xl"></i>
                    </div>
                    <div class="text-xs">全局表 (Global Table)</div>
                    <div class="mt-2 text-xs">每个对象关联一个<strong>驱逐映射</strong>，记录该对象在不同大小缓存中的“状态”。</div>
                  </div>
                  <p class="text-green-700 text-xs"><strong>优势:</strong> 数据只存一份，通过映射动态重建任何大小缓存的堆栈。</p>
                </div>
              </div>
            </div>
          </div>

          <div class="bg-white p-4 md:p-6 rounded-lg border border-gray-200">
            <h3 class="font-bold text-xl text-gray-800 mb-4">算法基本流程 (每次访问)</h3>
            <ol class="list-decimal list-inside space-y-3 text-gray-700 pl-2">
              <li><strong>计算重用距离:</strong> 查找被访问对象的最小存在缓存大小，作为其重用距离D。更新该距离对应的直方图计数器。</li>
              <li><strong>动态重建堆栈:</strong> 对于所有小于D的缓存大小S，利用全局表和驱逐映射，动态重建该大小缓存的内部堆栈。</li>
              <li><strong>执行驱逐并更新映射:</strong> 从每个重建堆栈的顶部选择对象进行驱逐，并在被驱逐对象的驱逐映射中插入新记录，记录被驱逐时的缓存大小S及其他策略相关信息。</li>
            </ol>
            <div class="mt-4 bg-blue-50 p-3 rounded text-sm">
              <strong>关键区别:</strong> MiniSim为每个访问处理<strong>所有</strong>预配置的缓存大小（如100个）。Kosmo只处理<strong>小于D</strong>的缓存大小，数量由<strong>粒度参数G</strong>控制。
            </div>
          </div>

          <div class="bg-white p-4 md:p-6 rounded-lg border border-gray-200">
            <h3 class="font-bold text-xl text-gray-800 mb-4">关键技术优化</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div class="space-y-4">
                <div class="bg-yellow-50 p-3 rounded border border-yellow-200">
                  <h4 class="font-semibold text-yellow-700 mb-1"><i class="fas fa-sliders-h mr-2"></i>粒度控制 (Granularity)</h4>
                  <p class="text-sm text-gray-700">通过参数G限制每次访问需要重建的缓存数量。实验表明G=10即可在精度和开销间取得良好平衡。</p>
                </div>
                <div class="bg-red-50 p-3 rounded border border-red-200">
                  <h4 class="font-semibold text-red-700 mb-1"><i class="fas fa-cut mr-2"></i>驱逐记录剪枝 (Pruning)</h4>
                  <p class="text-sm text-gray-700">当为对象插入一个大小为S的新驱逐记录时，删除所有S' < S的旧记录。这<strong>假定</strong>了包含性属性，虽然可能引入误差，但实验表明误差可忽略，同时能大幅减少内存使用（平均减少387倍）。</p>
                </div>
              </div>
              <div class="space-y-4">
                <div class="bg-green-50 p-3 rounded border border-green-200">
                  <h4 class="font-semibold text-green-700 mb-1"><i class="fas fa-chart-pie mr-2"></i>使用SHARDS采样</h4>
                  <p class="text-sm text-gray-700">采用SHARDS采样算法处理访问轨迹，减少全局表中的对象数量，提升处理速度。支持固定速率或固定大小的采样模式。</p>
                </div>
                <div class="bg-purple-50 p-3 rounded border border-purple-200">
                  <h4 class="font-semibold text-purple-700 mb-1"><i class="fas fa-parallel mr-2"></i>并行堆栈重建</h4>
                  <p class="text-sm text-gray-700">不同大小缓存的堆栈重建相互独立，可以并行执行，提高吞吐量。</p>
                </div>
              </div>
            </div>
          </div>

          <div class="bg-white p-4 md:p-6 rounded-lg border border-gray-200">
            <h3 class="font-bold text-xl text-gray-800 mb-4"><i class="fas fa-expand mr-3 text-blue-500"></i>支持多种驱逐策略</h3>
            <p class="text-gray-700 mb-4">Kosmo通过为每种策略定制“驱逐映射”的实现，来支持不同的驱逐逻辑。以下是几个例子：</p>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
              <div class="bg-blue-50 p-3 rounded text-center">
                <i class="fas fa-sort-numeric-down text-blue-500 text-2xl mb-2"></i>
                <h4 class="font-semibold text-blue-700">LFU映射</h4>
                <p class="text-gray-700">记录对象在不同大小缓存中被驱逐时的全局访问计数。</p>
              </div>
              <div class="bg-green-50 p-3 rounded text-center">
                <i class="fas fa-stream text-green-500 text-2xl mb-2"></i>
                <h4 class="font-semibold text-green-700">FIFO映射</h4>
                <p class="text-gray-700">记录对象在不同大小缓存中的进入时间。</p>
              </div>
              <div class="bg-purple-50 p-3 rounded text-center">
                <i class="fas fa-random text-purple-500 text-2xl mb-2"></i>
                <h4 class="font-semibold text-purple-700">2Q/LRFU映射</h4>
                <p class="text-gray-700">更复杂，需要维护多个集合或结合时间和频率信息。</p>
              </div>
            </div>
          </div>

          <div class="bg-white p-4 md:p-6 rounded-lg border border-gray-200">
            <h3 class="font-bold text-xl text-gray-800 mb-4"><i class="fas fa-bolt mr-3 text-yellow-500"></i>扩展功能</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                <h4 class="font-semibold text-gray-700 mb-2">支持可变大小对象</h4>
                <p class="text-sm text-gray-700">在重建堆栈时计算已用空间，并持续从顶部驱逐对象，直到满足缓存大小限制。这对于Key-Value缓存等场景至关重要。</p>
                <!-- 原图5占位符 -->
                <details class="technical-details bg-gray-50 rounded-lg p-4 mt-4">
                  <summary class="cursor-pointer font-semibold text-gray-800 hover:text-blue-600 transition-colors py-2 text-sm">
                    <i class="fas fa-image mr-2"></i>图5: 固定大小 vs 可变大小对象MRC对比
                  </summary>
                  <div class="mt-4 space-y-4">
                    <div class="image-placeholder bg-gradient-to-br from-gray-100 to-gray-200 p-4 rounded-lg text-center border-2 border-dashed border-gray-300">
                      <img src="./images/fig5.png" alt="论文图5: 固定大小与可变大小对象在MSR web工作负载下，使用LFU策略的MRC对比，显示两者存在显著差异。" class="max-w-full h-auto rounded-lg">
                    </div>
                    <div class="text-xs text-gray-600 bg-gray-50 p-2 rounded border">
                      <strong>图注:</strong> MRCs for the MSR web workload for fixed versus variable-sized objects using the LFU eviction policy.
                    </div>
                  </div>
                </details>
              </div>
              <div>
                <h4 class="font-semibold text-gray-700 mb-2">支持TTL (Time-to-Live)</h4>
                <p class="text-sm text-gray-700">在重建堆栈时检查对象是否过期，过期的对象不加入堆栈，从而支持具有生存时间限制的缓存分析。</p>
                <h4 class="font-semibold text-gray-700 mt-4 mb-2">同时生成多个策略的MRC</h4>
                <p class="text-sm text-gray-700">通过在全局表中为每个对象维护多个驱逐映射（每种策略一个），Kosmo可以在单次遍历中为多种驱逐策略同时生成MRC。</p>
              </div>
            </div>
          </div>
        </div>
      </section>
      
      <!-- 测试与评估 -->
      <section id="evaluation" class="content-section mobile-optimized mb-12 md:mb-16">
        <h2 class="text-2xl md:text-3xl font-bold text-gray-800 mb-6 md:mb-8 flex items-center">
          <i class="fas fa-chart-line mr-3 text-blue-500"></i>
          测试与评估
        </h2>
        <div class="space-y-8">
          <div class="bg-white p-4 md:p-6 rounded-lg border border-gray-200">
            <h3 class="font-bold text-xl text-gray-800 mb-4">实验设置</h3>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
              <div class="bg-blue-50 p-3 rounded">
                <h4 class="font-semibold text-blue-700 mb-2">数据集</h4>
                <ul class="list-disc list-inside text-gray-700">
                  <li><strong>52个</strong>公开访问轨迹</li>
                  <li>MSR, Twitter, SEC</li>
                  <li>总计约<strong>1260亿</strong>次访问</li>
                </ul>
              </div>
              <div class="bg-green-50 p-3 rounded">
                <h4 class="font-semibold text-green-700 mb-2">对比算法</h4>
                <ul class="list-disc list-inside text-gray-700">
                  <li><strong>Kosmo</strong> (本文提出)</li>
                  <li><strong>MiniSim</strong> (当前最优)</li>
                  <li>配置: SHARDS采样 (固定速率R=0.001，固定大小S_max=1024/2048)</li>
                </ul>
              </div>
              <div class="bg-purple-50 p-3 rounded">
                <h4 class="font-semibold text-purple-700 mb-2">评估指标</h4>
                <ul class="list-disc list-inside text-gray-700">
                  <li><strong>内存使用</strong> (高水位标记)</li>
                  <li><strong>吞吐量</strong> (访问数/秒)</li>
                  <li><strong>精度</strong> (平均绝对误差 MAE)</li>
                </ul>
              </div>
            </div>
          </div>

          <!-- 内存使用结果 -->
          <div class="bg-white p-4 md:p-6 rounded-lg border border-gray-200">
            <h3 class="font-bold text-xl text-gray-800 mb-4">结果1：内存使用 (更低更好)</h3>
            <!-- 原图6占位符 -->
            <details class="technical-details bg-gray-50 rounded-lg p-4 md:p-6 mb-8">
              <summary class="cursor-pointer font-semibold text-lg md:text-xl text-gray-800 hover:text-blue-600 transition-colors py-2">
                <i class="fas fa-memory mr-2"></i>技术细节：图6 - 内存使用对比
              </summary>
              <div class="mt-6 space-y-6">
                <div class="original-figure-container">
                  <div class="flex flex-col sm:flex-row sm:items-center justify-between mb-4 gap-2">
                    <h5 class="font-semibold text-gray-700 text-base md:text-lg">
                      <i class="fas fa-image mr-2 text-blue-500"></i>
                      原图 6: Memory usage of Kosmo and MiniSim for all eviction policies.
                    </h5>
                    <span class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded self-start sm:self-auto">论文原图</span>
                  </div>
                  <div class="image-placeholder bg-gradient-to-br from-gray-100 to-gray-200 p-6 md:p-8 rounded-lg text-center border-2 border-dashed border-gray-300">
                    <img src="./images/fig6.png" alt="论文图6: Kosmo和MiniSim在LFU、FIFO、2Q、LRFU四种驱逐策略下的内存使用对比箱线图，Y轴为对数坐标，显示Kosmo的内存使用远低于MiniSim。" class="max-w-full h-auto rounded-lg">
                  </div>
                  <div class="mt-4 text-sm text-gray-600 bg-gray-50 p-3 rounded border">
                    <strong>原图图注:</strong> Memory usage of Kosmo and MiniSim for all eviction policies. Note the logarithmic scale of the y-axis.
                  </div>
                </div>
                <div class="bg-green-50 p-4 rounded-lg border border-green-200">
                  <h5 class="font-semibold text-green-700 mb-3 flex items-center text-base md:text-lg">
                    <i class="fas fa-award mr-2"></i>核心结论：
                  </h5>
                  <ul class="list-disc list-inside space-y-2 text-sm md:text-base text-gray-700">
                    <li><strong>平均降低3.6倍:</strong> Kosmo的平均内存开销是MiniSim的约1/3.6。</li>
                    <li><strong>极端情况降低36倍:</strong> 在某些工作负载下，内存节省可达36倍。</li>
                    <li><strong>根本原因:</strong> Kosmo通过全局表和驱逐映射共享数据，避免了MiniSim中多个模拟缓存间的数据重复存储。</li>
                  </ul>
                </div>
              </div>
            </details>
          </div>

          <!-- 吞吐量结果 -->
          <div class="bg-white p-4 md:p-6 rounded-lg border border-gray-200">
            <h3 class="font-bold text-xl text-gray-800 mb-4">结果2：吞吐量 (更高更好)</h3>
            <!-- 原图7占位符 -->
            <details class="technical-details bg-gray-50 rounded-lg p-4 md:p-6 mb-8">
              <summary class="cursor-pointer font-semibold text-lg md:text-xl text-gray-800 hover:text-blue-600 transition-colors py-2">
                <i class="fas fa-tachometer-alt mr-2"></i>技术细节：图7 - 吞吐量对比
              </summary>
              <div class="mt-6 space-y-6">
                <div class="original-figure-container">
                  <div class="flex flex-col sm:flex-row sm:items-center justify-between mb-4 gap-2">
                    <h5 class="font-semibold text-gray-700 text-base md:text-lg">
                      <i class="fas fa-image mr-2 text-blue-500"></i>
                      原图 7: Throughput of Kosmo and MiniSim for all eviction policies.
                    </h5>
                    <span class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded self-start sm:self-auto">论文原图</span>
                  </div>
                  <div class="image-placeholder bg-gradient-to-br from-gray-100 to-gray-200 p-6 md:p-8 rounded-lg text-center border-2 border-dashed border-gray-300">
                    <img src="./images/fig7.png" alt="论文图7: Kosmo和MiniSim在四种驱逐策略下的吞吐量对比箱线图，Y轴为对数坐标，显示Kosmo吞吐量总体高于MiniSim。" class="max-w-full h-auto rounded-lg">
                  </div>
                  <div class="mt-4 text-sm text-gray-600 bg-gray-50 p-3 rounded border">
                    <strong>原图图注:</strong> Throughput of Kosmo and MiniSim for all eviction policies. Note the logarithmic scale of the y-axis.
                  </div>
                </div>
                <div class="bg-blue-50 p-4 rounded-lg border border-blue-200">
                  <h5 class="font-semibold text-blue-700 mb-3 flex items-center text-base md:text-lg">
                    <i class="fas fa-chart-line mr-2"></i>核心结论：
                  </h5>
                  <ul class="list-disc list-inside space-y-2 text-sm md:text-base text-gray-700">
                    <li><strong>平均提升1.3倍:</strong> Kosmo的吞吐量平均比MiniSim高30%。</li>
                    <li><strong>2Q策略例外:</strong> 对于2Q策略，Kosmo的吞吐量约为MiniSim的0.54倍。这是因为Kosmo需要为每个访问重建<strong>两个</strong>堆栈（A1和Am）。</li>
                    <li><strong>效率来源:</strong> 并行重建、只处理必要缓存（大小 < D）以及SHARDS采样共同提升了Kosmo的吞吐量。</li>
                  </ul>
                </div>
              </div>
            </details>
          </div>

          <!-- 精度结果 -->
          <div class="bg-white p-4 md:p-6 rounded-lg border border-gray-200">
            <h3 class="font-bold text-xl text-gray-800 mb-4">结果3：精度 - 平均绝对误差 MAE (更低更好)</h3>
            <!-- 原图8占位符 -->
            <details class="technical-details bg-gray-50 rounded-lg p-4 md:p-6 mb-8">
              <summary class="cursor-pointer font-semibold text-lg md:text-xl text-gray-800 hover:text-blue-600 transition-colors py-2">
                <i class="fas fa-crosshairs mr-2"></i>技术细节：图8 - 精度(MAE)对比
              </summary>
              <div class="mt-6 space-y-6">
                <div class="original-figure-container">
                  <div class="flex flex-col sm:flex-row sm:items-center justify-between mb-4 gap-2">
                    <h5 class="font-semibold text-gray-700 text-base md:text-lg">
                      <i class="fas fa-image mr-2 text-blue-500"></i>
                      原图 8: MAE of Kosmo and MiniSim for all eviction policies.
                    </h5>
                    <span class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded self-start sm:self-auto">论文原图</span>
                  </div>
                  <div class="image-placeholder bg-gradient-to-br from-gray-100 to-gray-200 p-6 md:p-8 rounded-lg text-center border-2 border-dashed border-gray-300">
                    <img src="./images/fig8.png" alt="论文图8: Kosmo和MiniSim在四种驱逐策略下的平均绝对误差对比箱线图，显示两者精度总体相当。" class="max-w-full h-auto rounded-lg">
                  </div>
                  <div class="mt-4 text-sm text-gray-600 bg-gray-50 p-3 rounded border">
                    <strong>原图图注:</strong> MAE of Kosmo and MiniSim for all eviction policies.
                  </div>
                </div>
                <div class="bg-purple-50 p-4 rounded-lg border border-purple-200">
                  <h5 class="font-semibold text-purple-700 mb-3 flex items-center text-base md:text-lg">
                    <i class="fas fa-balance-scale mr-2"></i>核心结论：
                  </h5>
                  <ul class="list-disc list-inside space-y-2 text-sm md:text-base text-gray-700">
                    <li><strong>总体精度相当:</strong> Kosmo和MiniSim生成的MRC精度相似，平均MAE差异在0.25%以内。</li>
                    <li><strong>策略差异:</strong> Kosmo在LFU和LRFU上MAE略低，在FIFO和2Q上MAE略高（分别高0.44%和1.56%）。</li>
                    <li><strong>原因分析:</strong> FIFO和2Q策略违反包含性属性的频率更高（见下文），而Kosmo的剪枝优化假设了包含性，因此会引入微小误差。</li>
                  </ul>
                </div>
              </div>
            </details>
          </div>

          <!-- 包含性属性违反分析 -->
          <div class="bg-white p-4 md:p-6 rounded-lg border border-gray-200">
            <h3 class="font-bold text-xl text-gray-800 mb-4">深入分析：包含性属性违反情况</h3>
            <!-- 原图10占位符 -->
            <details class="technical-details bg-gray-50 rounded-lg p-4 md:p-6 mb-8">
              <summary class="cursor-pointer font-semibold text-lg md:text-xl text-gray-800 hover:text-blue-600 transition-colors py-2">
                <i class="fas fa-exclamation-circle mr-2"></i>技术细节：图10 - 包含性属性违反比例
              </summary>
              <div class="mt-6 space-y-6">
                <div class="original-figure-container">
                  <div class="flex flex-col sm:flex-row sm:items-center justify-between mb-4 gap-2">
                    <h5 class="font-semibold text-gray-700 text-base md:text-lg">
                      <i class="fas fa-image mr-2 text-blue-500"></i>
                      原图 10: Ratio of accesses for which a violation of the inclusion property occurs.
                    </h5>
                    <span class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded self-start sm:self-auto">论文原图</span>
                  </div>
                  <div class="image-placeholder bg-gradient-to-br from-gray-100 to-gray-200 p-6 md:p-8 rounded-lg text-center border-2 border-dashed border-gray-300">
                    <img src="./images/fig10.png" alt="论文图10: 在MSR数据集上，LFU、FIFO、2Q、LRFU、MRU驱逐策略违反包含性属性的访问比例对比图，分别使用100、50、10个模拟点进行测量。" class="max-w-full h-auto rounded-lg">
                  </div>
                  <div class="mt-4 text-sm text-gray-600 bg-gray-50 p-3 rounded border">
                    <strong>原图图注:</strong> Ratio of accesses for which a violation of the inclusion property occurs for the LFU, FIFO, 2Q, LRFU, and MRU eviction policies across all workloads in the MSR dataset when simulated with 100, 50, and 10 points.
                  </div>
                </div>
                <div class="bg-red-50 p-4 rounded-lg border border-red-200">
                  <h5 class="font-semibold text-red-700 mb-3 flex items-center text-base md:text-lg">
                    <i class="fas fa-search mr-2"></i>关键发现：
                  </h5>
                  <ul class="list-disc list-inside space-y-2 text-sm md:text-base text-gray-700">
                    <li><strong>LFU违反率低:</strong> 仅1.49%的访问违反包含性，且多数是短期、小范围的违反（模拟点减少后违反率急剧下降）。</li>
                    <li><strong>FIFO违反率高:</strong> 20.61%的访问违反包含性，且范围较广。这解释了为何Kosmo在FIFO上的MAE略高。</li>
                    <li><strong>2Q居中:</strong> 违反率10.49%。</li>
                    <li><strong>LRFU违反率极低:</strong> 仅0.08%，几乎总是满足包含性。</li>
                    <li><strong>MRU违反率高:</strong> 29.12%（考虑变长对象时），这与通常认知不同。</li>
                    <li><strong>对Kosmo的影响:</strong> 剪枝优化带来的误差与策略违反包含性的频率正相关。但由于违反通常范围较小，Kosmo引入的总体误差依然很低。</li>
                  </ul>
                </div>
              </div>
            </details>
          </div>
        </div>
      </section>
      
      <!-- 结论 -->
      <section id="conclusion" class="content-section mobile-optimized mb-12 md:mb-16">
        <h2 class="text-2xl md:text-3xl font-bold text-gray-800 mb-6 md:mb-8 flex items-center">
          <i class="fas fa-flag-checkered mr-3 text-blue-500"></i>
          结论与未来工作
        </h2>
        <div class="space-y-6">
          <div class="bg-gradient-to-r from-blue-50 to-indigo-50 border-l-4 border-blue-500 p-4 md:p-6 rounded-r-lg">
            <h3 class="font-bold text-blue-700 mb-4 text-lg md:text-xl">主要结论</h3>
            <ul class="list-disc list-inside space-y-3 text-gray-700">
              <li>作者提出了<strong>Kosmo</strong>，一种创新的在线MRC生成算法，能够同时为<strong>多种不满足包含性属性的驱逐策略</strong>高效生成MRC。</li>
              <li>通过引入<strong>驱逐映射</strong>数据结构，Kosmo实现了数据共享，相比当前最优算法<strong>MiniSim</strong>，平均<strong>内存开销降低3.6倍</strong>，吞吐量<strong>提升1.3倍</strong>，同时保持了相当的精度。</li>
              <li>Kosmo使得在运行时对缓存进行<strong>在线配置分析</strong>成为可能，解决了MiniSim因内存开销过大而无法在线应用的问题。</li>
            </ul>
          </div>

          <div class="bg-gradient-to-r from-yellow-50 to-amber-50 border-l-4 border-yellow-500 p-4 md:p-6 rounded-r-lg">
            <h3 class="font-bold text-yellow-700 mb-4 text-lg md:text-xl">论文局限性</h3>
            <ul class="list-disc list-inside space-y-3 text-gray-700">
              <li><strong>支持策略范围有限:</strong> 论文仅详细描述了Kosmo对六种驱逐策略（LFU、FIFO、2Q、LRFU、LRU、MRU）的实现。虽然原理上可扩展，但哪些类别的策略能被支持仍是开放问题。</li>
              <li><strong>单调递减假设:</strong> Kosmo生成的MRC强制为单调递减，对于表现出显著非单调行为的驱逐策略，可能增加误差。</li>
              <li><strong>性能依赖底层实现:</strong> 模拟的性能受所模拟缓存底层实现效率的影响。</li>
            </ul>
          </div>

          <div class="bg-gradient-to-r from-green-50 to-teal-50 border-l-4 border-green-500 p-4 md:p-6 rounded-r-lg">
            <h3 class="font-bold text-green-700 mb-4 text-lg md:text-xl">未来工作方向</h3>
            <ul class="list-disc list-inside space-y-3 text-gray-700">
              <li><strong>支持更多策略:</strong> 扩展Kosmo以支持更复杂的驱逐策略，如LHD、LIRS、ARC等。</li>
              <li><strong>提升吞吐量:</strong> 通过使用更专用的数据结构，进一步降低Kosmo的计算开销。</li>
              <li><strong>理论研究:</strong> 明确界定Kosmo算法能够支持的驱逐策略类别。</li>
            </ul>
          </div>

          <div class="bg-white p-4 rounded-lg border border-gray-200 text-center">
            <p class="text-gray-700 italic">“Kosmo enables efficient online MRC generation for a variety of eviction policies, making real-time cache configuration analysis practical.”</p>
          </div>
        </div>
      </section>
    </div>
  </div>
  
  <!-- 交互脚本 -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const navItems = document.querySelectorAll('.nav-item');
      const sections = document.querySelectorAll('section');
      
      function highlightNav() {
        let current = '';
        sections.forEach(section => {
          const sectionTop = section.offsetTop;
          const sectionHeight = section.clientHeight;
          if (window.scrollY >= (sectionTop - 100)) {
            current = section.getAttribute('id');
          }
        });

        navItems.forEach(item => {
          item.classList.remove('active');
          if (item.getAttribute('href') === `#${current}`) {
            item.classList.add('active');
          }
        });
      }

      window.addEventListener('scroll', highlightNav);
      
      // 平滑滚动
      navItems.forEach(item => {
        item.addEventListener('click', function(e) {
          e.preventDefault();
          const targetId = this.getAttribute('href');
          const targetSection = document.querySelector(targetId);
          window.scrollTo({
            top: targetSection.offsetTop - 80,
            behavior: 'smooth'
          });
        });
      });

      // 自动展开当前活跃章节内的第一个技术细节
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            const firstDetails = entry.target.querySelector('details.technical-details');
            if (firstDetails) {
              // 可以在这里设置自动展开，但为了用户体验，目前保持手动展开
            }
          }
        });
      }, { threshold: 0.5 });
      sections.forEach(section => observer.observe(section));
    });
  </script>
<!-- AI生成内容标识 --><div id="ai-badge" style="position: fixed; bottom: 20px; right: 20px; z-index: 9999; cursor: pointer;"><div style="background: linear-gradient(135deg, #6366f1, #8b5cf6); color: white; padding: 8px 16px; border-radius: 20px; font-size: 14px; font-weight: 600; box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3); display: flex; align-items: center; gap: 6px; transition: all 0.3s ease;"><span style="font-size: 16px;">🤖</span><span>AI生成</span></div></div><script>(function(){const badge=document.getElementById('ai-badge');let expanded=false; badge.addEventListener('click',function(){if(!expanded){const details=document.createElement('div');details.id='ai-details';details.style.cssText="position:absolute;bottom:50px;right:0;background:white;color:#333;padding:12px;border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,0.15);width:200px;font-size:12px;line-height:1.5;border:1px solid #e5e7eb;";details.innerHTML='<div style="font-weight:600;margin-bottom:8px;color:#6366f1">人工智能生成内容</div><div style="color:#666">本页面内容通过AI技术自动生成，仅供参考。生成时间：'+new Date().toLocaleDateString('zh-CN')+'</div>';badge.appendChild(details);expanded=true;}else{const details=document.getElementById('ai-details');if(details)details.remove();expanded=false;}});})();</script></body>
</html>